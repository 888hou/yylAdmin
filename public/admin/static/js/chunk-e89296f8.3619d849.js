(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e89296f8"],{dbe5:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{on:{"tab-click":e.tabClick},model:{value:e.actTabName,callback:function(t){e.actTabName=t},expression:"actTabName"}},[e.checkPermission(["admin/SettingWechat/offiInfo"])?a("el-tab-pane",{attrs:{label:"公众号",name:"WechatOffi"}},[e.WechatOffi?a("wechat-offi"):e._e()],1):e._e(),e.checkPermission(["admin/SettingWechat/miniInfo"])?a("el-tab-pane",{attrs:{label:"小程序",name:"WechatMini"}},[e.WechatMini?a("wechat-mini"):e._e()],1):e._e()],1)],1)},i=[],n=(a("1e6a"),a("e350")),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"原始ID",prop:"origin_id"}},[a("el-input",{model:{value:e.model.origin_id,callback:function(t){e.$set(e.model,"origin_id",t)},expression:"model.origin_id"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"qrcode"}},[a("el-image",{staticStyle:{height:"100px"},attrs:{shape:"circle",fit:"contain",src:e.model.qrcode_url,"preview-src-list":[e.model.qrcode_url]}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]),a("el-upload",{attrs:{name:"file","show-file-list":!1,action:e.uploadAction,headers:e.uploadHeaders,data:e.uploadData,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[a("el-button",{attrs:{size:"mini"}},[e._v("上传")])],1),a("span",[e._v("jpg、png图片，小于200KB，宽高1:1")])],1),a("el-form-item",{attrs:{label:"AppID",prop:"appid"}},[a("el-input",{model:{value:e.model.appid,callback:function(t){e.$set(e.model,"appid",t)},expression:"model.appid"}})],1),a("el-form-item",{attrs:{label:"AppSecret",prop:"appsecret"}},[a("el-input",{model:{value:e.model.appsecret,callback:function(t){e.$set(e.model,"appsecret",t)},expression:"model.appsecret"}})],1),a("el-form-item",{attrs:{label:"服务器地址(URL)",prop:"url"}},[a("el-input",{model:{value:e.model.url,callback:function(t){e.$set(e.model,"url",t)},expression:"model.url"}})],1),a("el-form-item",{attrs:{label:"令牌(Token)",prop:"token"}},[a("el-input",{model:{value:e.model.token,callback:function(t){e.$set(e.model,"token",t)},expression:"model.token"}})],1),a("el-form-item",{attrs:{label:"消息加解密密钥",prop:"encoding_aes_key"}},[a("el-input",{model:{value:e.model.encoding_aes_key,callback:function(t){e.$set(e.model,"encoding_aes_key",t)},expression:"model.encoding_aes_key"}})],1),a("el-form-item",{attrs:{label:"消息加解密方式",prop:"encoding_aes_type"}},[a("el-radio-group",{model:{value:e.model.encoding_aes_type,callback:function(t){e.$set(e.model,"encoding_aes_type",t)},expression:"model.encoding_aes_type"}},e._l(e.encoding_aes_types,(function(t){return a("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1)],1),a("el-form-item",[a("el-button",{on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},r=[],s=a("b775");function c(e){return Object(s["a"])({url:"/admin/SettingWechat/offiInfo",method:"get",params:e})}function d(e){return Object(s["a"])({url:"/admin/SettingWechat/offiEdit",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/admin/SettingWechat/miniInfo",method:"get",params:e})}function m(e){return Object(s["a"])({url:"/admin/SettingWechat/miniEdit",method:"post",data:e})}var p=a("5f87"),f={components:{},data:function(){return{loading:!1,encoding_aes_types:[{value:1,label:"明文模式"},{value:2,label:"兼容模式"},{value:3,label:"安全模式"}],model:{name:"",origin_id:"",qrcode:"",appid:"",appsecret:"",url:"",token:"",encoding_aes_key:"",encoding_aes_type:1,qrcode_url:""},uploadAction:"/admin/SettingWechat/qrcode",uploadHeaders:{AdminUserId:Object(p["g"])(),AdminToken:Object(p["f"])()},uploadData:{type:"offi"},rules:{appid:[{required:!0,message:"请输入appid",trigger:"blur"}],appsecret:[{required:!0,message:"请输入appsecret",trigger:"blur"}]}}},created:function(){this.info()},methods:{info:function(){var e=this;c().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,c().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,d(e.model).then((function(t){e.info(),e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},uploadSuccess:function(e,t){200===e.code?(this.model.qrcode_url=e.data.file_url,this.model.qrcode=e.data.file_path,this.$message.success(e.msg)):this.$message.error(e.msg)},uploadError:function(e,t){this.$message.error("上传出错")}}},g=f,h=a("5d22"),b=Object(h["a"])(g,l,r,!1,null,null,null),_=b.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{xs:24,sm:12}},[a("el-form",{ref:"ref",attrs:{model:e.model,rules:e.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.model.name,callback:function(t){e.$set(e.model,"name",t)},expression:"model.name"}})],1),a("el-form-item",{attrs:{label:"原始ID",prop:"origin_id"}},[a("el-input",{model:{value:e.model.origin_id,callback:function(t){e.$set(e.model,"origin_id",t)},expression:"model.origin_id"}})],1),a("el-form-item",{attrs:{label:"二维码",prop:"qrcode"}},[a("el-image",{staticStyle:{height:"100px"},attrs:{shape:"circle",fit:"contain",src:e.model.qrcode_url,"preview-src-list":[e.model.qrcode_url]}},[a("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline"})])]),a("el-upload",{attrs:{name:"file","show-file-list":!1,action:e.uploadAction,headers:e.uploadHeaders,data:e.uploadData,"on-success":e.uploadSuccess,"on-error":e.uploadError}},[a("el-button",{attrs:{size:"mini"}},[e._v("上传")])],1),a("span",[e._v("jpg、png图片，小于200KB，宽高1:1")])],1),a("el-form-item",{attrs:{label:"AppID",prop:"appid"}},[a("el-input",{model:{value:e.model.appid,callback:function(t){e.$set(e.model,"appid",t)},expression:"model.appid"}})],1),a("el-form-item",{attrs:{label:"AppSecret",prop:"appsecret"}},[a("el-input",{model:{value:e.model.appsecret,callback:function(t){e.$set(e.model,"appsecret",t)},expression:"model.appsecret"}})],1),a("el-form-item",[a("el-button",{on:{click:function(t){return e.refresh()}}},[e._v("刷新")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submit()}}},[e._v("提交")])],1)],1)],1)],1)],1)},k=[],$={components:{},data:function(){return{loading:!1,model:{name:"",origin_id:"",qrcode:"",appid:"",appsecret:"",qrcode_url:""},uploadAction:"/admin/SettingWechat/qrcode",uploadHeaders:{AdminUserId:Object(p["g"])(),AdminToken:Object(p["f"])()},uploadData:{type:"mini"},rules:{appid:[{required:!0,message:"请输入appid",trigger:"blur"}],appsecret:[{required:!0,message:"请输入appsecret",trigger:"blur"}]}}},created:function(){this.info()},methods:{info:function(){var e=this;u().then((function(t){e.model=t.data}))},refresh:function(){var e=this;this.loading=!0,u().then((function(t){e.model=t.data,e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1}))},submit:function(){var e=this;this.$refs["ref"].validate((function(t){t&&(e.loading=!0,m(e.model).then((function(t){e.info(),e.loading=!1,e.$message.success(t.msg)})).catch((function(){e.loading=!1})))}))},uploadSuccess:function(e,t){200===e.code?(this.model.qrcode_url=e.data.file_url,this.model.qrcode=e.data.file_path,this.$message.success(e.msg)):this.$message.error(e.msg)},uploadError:function(e,t){this.$message.error("上传出错")}}},x=$,y=Object(h["a"])(x,v,k,!1,null,null,null),q=y.exports,w={name:"Wechat",components:{WechatOffi:_,WechatMini:q},data:function(){return{WechatOffi:!0,WechatMini:!1,actTabName:"WechatOffi"}},created:function(){},methods:{checkPermission:n["a"],tabClick:function(e){this[e.name]=!0}}},W=w,O=Object(h["a"])(W,o,i,!1,null,null,null);t["default"]=O.exports},e350:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("4318"),a("2e4f");var o=a("4360");function i(e){if(e&&e instanceof Array&&e.length>0){var t=o["a"].getters&&o["a"].getters.roles,a=e,i=t.some((function(e){return a.includes(e)}));return i}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}}}]);
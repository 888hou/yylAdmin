import{aa as e,a as l,k as a,w as t,a2 as s,a1 as o,c as m,P as d,ae as i,ax as r,ar as u}from"./index.DjA_re4j.js";import{E as n}from"./el-row.BdhO5HhT.js";import{a as p,E as _}from"./el-form-item.hhV0qe52.js";import{a as f,E as h}from"./el-select._wYx6vZR.js";import"./el-scrollbar.Cy-juajC.js";import"./el-popper.Cw-ytP0e.js";import{E as c}from"./el-col.Dga7oIhs.js";import{s as g}from"./screen-height.Bl-ULtFD.js";import{g as b,h as V,i as j}from"./setting.CdigcNLh.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.DfHHGGLY.js";import"./_Uint8Array.CC4oM34b.js";import"./debounce.DrUEbGEy.js";import"./index.DGtsW67O.js";import"./isUndefined.DgmxjSXK.js";import"./tagsView.DcdT0xLi.js";const w=y({name:"SystemSettingEmail",data:()=>({name:"邮件设置",height:680,loading:!1,model:{email_host:"",email_port:"",email_secure:"",email_username:"",email_password:"",email_setfrom:"",email_test:""},rules:{email_secure:[{required:!0,message:"请选择SMTP协议",trigger:"blur"}]},secure:[{value:"ssl",label:"SSL"},{value:"tls",label:"TLS"}]}),created(){this.height=g(210),this.info()},methods:{info(){b().then((e=>{this.model=e.data}))},refresh(){this.loading=!0,b().then((l=>{this.model=l.data,this.loading=!1,e.success(l.msg)})).catch((()=>{this.loading=!1}))},submit(){this.$refs.ref.validate((l=>{l&&(this.loading=!0,V(this.model).then((l=>{this.loading=!1,e.success(l.msg)})).catch((()=>{this.loading=!1})))}))},test(){this.$refs.ref.validate((l=>{l&&(this.model.email_test?(this.loading=!0,j(this.model).then((l=>{this.loading=!1,e.success(l.msg)})).catch((()=>{this.loading=!1}))):e.error("请输入测试邮箱"))}))}}},[["render",function(e,g,b,V,j,y){const w=r,x=c,S=p,v=f,U=h,k=u,q=_,E=n;return l(),a(E,null,{default:t((()=>[s(x,{span:16},{default:t((()=>[s(q,{ref:"ref",model:j.model,rules:j.rules,"label-width":"120px"},{default:t((()=>[s(S,{label:"* SMTP服务器",prop:"email_host"},{default:t((()=>[s(x,{span:8},{default:t((()=>[s(w,{modelValue:j.model.email_host,"onUpdate:modelValue":g[0]||(g[0]=e=>j.model.email_host=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),s(x,{span:16},{default:t((()=>[o(" 发送邮件服务器，如：smtp.qq.com ")])),_:1})])),_:1}),s(S,{label:"SMTP协议",prop:"email_secure"},{default:t((()=>[s(x,{span:8},{default:t((()=>[s(U,{modelValue:j.model.email_secure,"onUpdate:modelValue":g[1]||(g[1]=e=>j.model.email_secure=e),placeholder:""},{default:t((()=>[(l(!0),m(d,null,i(j.secure,(e=>(l(),a(v,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),s(x,{span:16},{default:t((()=>[o(" 发送邮件服务器加密方式，如：SSL ")])),_:1})])),_:1}),s(S,{label:"* SMTP端口",prop:"email_port"},{default:t((()=>[s(x,{span:8},{default:t((()=>[s(w,{modelValue:j.model.email_port,"onUpdate:modelValue":g[2]||(g[2]=e=>j.model.email_port=e),type:"number",clearable:""},null,8,["modelValue"])])),_:1}),s(x,{span:16},{default:t((()=>[o(" 发送邮件服务器端口号，如：465 ")])),_:1})])),_:1}),s(S,{label:"邮箱名称",prop:"email_setfrom"},{default:t((()=>[s(x,{span:8},{default:t((()=>[s(w,{modelValue:j.model.email_setfrom,"onUpdate:modelValue":g[3]||(g[3]=e=>j.model.email_setfrom=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),s(x,{span:16},{default:t((()=>[o(" 发件邮箱名称即发件人，如：yylAdmin ")])),_:1})])),_:1}),s(S,{label:"* 邮箱账号",prop:"email_username"},{default:t((()=>[s(x,{span:8},{default:t((()=>[s(w,{modelValue:j.model.email_username,"onUpdate:modelValue":g[4]||(g[4]=e=>j.model.email_username=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),s(x,{span:16},{default:t((()=>[o(" 发件邮箱账号，如：123456789@qq.com ")])),_:1})])),_:1}),s(S,{label:"* 授权码/密码",prop:"email_password"},{default:t((()=>[s(x,{span:8},{default:t((()=>[s(w,{modelValue:j.model.email_password,"onUpdate:modelValue":g[5]||(g[5]=e=>j.model.email_password=e),type:"password",clearable:"","show-password":""},null,8,["modelValue"])])),_:1}),s(x,{span:16},{default:t((()=>[o(" 发件邮箱的授权码或密码，如：y1y2l3a4d5m6i7n ")])),_:1})])),_:1}),s(S,{label:"测试邮箱",prop:"email_test"},{default:t((()=>[s(x,{span:8},{default:t((()=>[s(w,{modelValue:j.model.email_test,"onUpdate:modelValue":g[6]||(g[6]=e=>j.model.email_test=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),s(x,{span:16},{default:t((()=>[s(k,{loading:j.loading,text:"",title:"先提交再发送",onClick:g[7]||(g[7]=e=>y.test())},{default:t((()=>[o(" 发送测试邮件 ")])),_:1},8,["loading"])])),_:1})])),_:1}),s(S,null,{default:t((()=>[s(k,{loading:j.loading,onClick:g[8]||(g[8]=e=>y.refresh())},{default:t((()=>[o("刷新")])),_:1},8,["loading"]),s(k,{loading:j.loading,type:"primary",onClick:g[9]||(g[9]=e=>y.submit())},{default:t((()=>[o("提交")])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})}]]);export{w as default};

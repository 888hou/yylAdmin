import{cD as e,cE as l,r as t,C as a,K as i,a as s,k as o,w as u,a3 as r,f as d,an as p,c as n,j as f,aa as c,a2 as y,t as m,bV as v,as as h}from"./index.Dxpxc0Wv.js";import{E as g}from"./el-dialog.C5oj6JW_.js";import{E as _}from"./el-row.zIhwjUGa.js";import{E as w}from"./el-text.ejFmqdVy.js";import{E as k}from"./el-col.BYj1fpTj.js";import{E as z}from"./el-avatar.BE6jY_Ku.js";import{E as T}from"./el-image-viewer.CDtIut0V.js";import{_ as j}from"./index.Cbbf_j0e.js";import{F as b}from"./index.C_cuZU8U.js";const x={key:0},B=["src"],S=["data"],E=["src"],V=["src"],C=["src"],U={key:3},F={key:4},K={key:1},M={__name:"FileImage",props:e({fileType:{type:String,default:"image"},fileTitle:{type:String,default:"上传图片"},fileTip:{type:String,default:"图片小于200KB，jpg、png格式。"},height:{type:Number,default:30},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},previewTeleported:{type:Boolean,default:!0},uploadBtn:{type:String,default:"上传"},deleteBtn:{type:String,default:"删除"},avatar:{type:Boolean,default:!1},upload:{type:Boolean,default:!1}},{modelValue:{type:Number,default:0},modelModifiers:{},fileUrl:{type:String,default:""},fileUrlModifiers:{}}),emits:["update:modelValue","update:fileUrl"],setup(e){const M=l(e,"modelValue"),N=l(e,"fileUrl"),A=e,D=t(24),I=t(0),R=t(!1),q=a((()=>({height:A.height+"px"}))),G=a((()=>({height:A.height+"px"}))),H=a((()=>({height:A.height+"px"}))),J=a((()=>({width:"90%"}))),L=a((()=>.7*A.height+"px"));function O(){R.value=!1}function P(e){R.value=!1;const l=e.length;if(l){const t=l-1;M.value=e[t].file_id,N.value=e[t].file_url}}return i([()=>A.avatar,()=>A.upload],(([e,l])=>{e&&(G.value.width=A.height+"px",G.value.borderRadius="50%"),l&&(D.value=12,I.value=12)}),{immediate:!0}),(l,t)=>{const a=j,i=T,A=z,Q=k,W=h,X=w,Y=_,Z=g;return s(),o(Y,{style:{width:"100%"}},{default:u((()=>[r(Q,{span:d(D),style:p(d(q))},{default:u((()=>[N.value?(s(),n("div",x,["image"===e.fileType?(s(),o(i,{key:0,style:p(d(G)),src:N.value,fit:e.fit,"preview-src-list":[N.value],"preview-teleported":e.previewTeleported,lazy:e.lazy,title:"点击看大图"},{error:u((()=>[r(a,{"icon-class":"picture"})])),_:1},8,["style","src","fit","preview-src-list","preview-teleported","lazy"])):"video"===e.fileType?(s(),n("video",{key:1,style:p(d(H)),controls:""},[f("source",{src:N.value,type:"video/mp4"},null,8,B),f("object",{data:N.value,style:p(d(H))},[f("embed",{src:N.value,style:p(d(H))},null,12,E)],12,S)],4)):"audio"===e.fileType?(s(),n("audio",{key:2,style:p(d(J)),controls:""},[f("source",{src:N.value,type:"audio/mp3"},null,8,V),f("embed",{src:N.value,style:p(d(J))},null,12,C)],4)):"word"===e.fileType?(s(),n("div",U,[r(a,{"icon-class":"document",size:d(L)},null,8,["size"])])):"other"===e.fileType?(s(),n("div",F,[r(a,{"icon-class":"folder",size:d(L)},null,8,["size"])])):c("",!0)])):(s(),n("div",K,[e.avatar?(s(),o(A,{key:0,size:e.height},{default:u((()=>[r(a,{"icon-class":"user-filled",size:d(L)},null,8,["size"])])),_:1},8,["size"])):c("",!0)]))])),_:1},8,["span","style"]),r(Q,{span:d(I)},{default:u((()=>[r(Y,null,{default:u((()=>[r(Q,null,{default:u((()=>[r(W,{onClick:t[0]||(t[0]=e=>{R.value=!0})},{default:u((()=>[y(m(e.uploadBtn),1)])),_:1}),r(W,{onClick:t[1]||(t[1]=e=>(M.value=0,void(N.value="")))},{default:u((()=>[y(m(e.deleteBtn),1)])),_:1}),N.value?(s(),o(W,{key:0,onClick:t[2]||(t[2]=e=>{window.open(N.value,"_blank")})},{default:u((()=>[y("下载")])),_:1})):c("",!0)])),_:1}),r(Q,null,{default:u((()=>[r(X,{size:"default",truncated:"",title:e.fileTip},{default:u((()=>[y(m(e.fileTip),1)])),_:1},8,["title"])])),_:1})])),_:1})])),_:1},8,["span"]),r(Z,{modelValue:d(R),"onUpdate:modelValue":t[3]||(t[3]=e=>v(R)?R.value=e:null),title:e.fileTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"1vh",width:"80%","append-to-body":""},{default:u((()=>[r(b,{"file-type":e.fileType,onFileCancel:O,onFileSubmit:P},null,8,["file-type"])])),_:1},8,["modelValue","title"])])),_:1})}}};export{M as _};

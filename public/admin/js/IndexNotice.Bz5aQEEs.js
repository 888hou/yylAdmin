import{a as e,c as o,a2 as t,w as i,a1 as l,t as a,N as n,k as s,j as r,am as d,O as m,a9 as p,ar as c}from"./index.DjA_re4j.js";import{v as u}from"./el-loading.B5cNeiq8.js";import{E as f}from"./el-scrollbar.Cy-juajC.js";import{a as h,E as g}from"./el-form-item.hhV0qe52.js";import{E as _}from"./el-col.Dga7oIhs.js";import{E as j}from"./el-dialog.yRJSSox7.js";import{_ as x}from"./index.B7UuPqmC.js";import{E as k,a as y}from"./el-table-column.CECY1sm-.js";import"./el-checkbox.hOtSUKt2.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-popper.Cw-ytP0e.js";import"./el-select._wYx6vZR.js";import{_ as w}from"./FileImage.DDSFINET.js";import{s as M}from"./screen-height.Bl-ULtFD.js";import{g as v,a as b,s as D}from"./settings.CwMQGCHg.js";import{n as C}from"./index.Gc6Bntno.js";import{i as V}from"./notice.BTr_acIG.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.DfHHGGLY.js";import"./_Uint8Array.CC4oM34b.js";import"./refs.DNzTDZsJ.js";import"./isUndefined.DgmxjSXK.js";import"./flatten.BFq1XWQr.js";import"./debounce.DrUEbGEy.js";import"./index.DGtsW67O.js";import"./el-row.BdhO5HhT.js";import"./el-text.w_ZtZ4uh.js";import"./el-avatar.D3u9l1HT.js";import"./el-image-viewer.fFYArL2i.js";import"./index.DhRVrygn.js";import"./index.De39iDjm.js";import"./FilePreview.CALYRKwz.js";import"./clipboard.2ITcRTuu.js";/* empty css                          */import"./el-card.Ben1v_kl.js";import"./el-link.BPpHkZqa.js";import"./el-switch.DFvPhZwO.js";/* empty css                       */import"./el-date-picker.CMm1Jx1A.js";import"./permission.DAMaNzFl.js";import"./index.Cp1HnnF1.js";import"./group.DVFDmR6W.js";import"./tag.CbH6Oio-.js";import"./index.BYJdpcwz.js";import"./tagsView.DcdT0xLi.js";const q=["innerHTML"];const $=U({name:"SystemIndexNotice",components:{Pagination:x},data(){return{name:"公告",height:680,loading:!1,idkey:"notice_id",query:{page:1,limit:v()},data:[],exps:[{exp:"like",name:"包含"}],count:0,dialog:!1,dialogTitle:this.$t("common.Notice"),infoDialog:!1,infoModel:{},oneDialog:!1,oneModel:{}}},created(){this.height=M(),this.list()},methods:{list(){b()||(this.loading=!0,C(this.query).then((e=>{if(this.data=e.data.list,this.count=e.data.count,this.loading=!1,this.count>0)if(1===this.count){const e=this.data[0];this.oneInfo(e)}else this.dialog=!0})).catch((()=>{this.loading=!1})))},info(e){this.infoDialog=!0;var o={};o[this.idkey]=e[this.idkey],V(o).then((e=>{this.infoModel=e.data}))},cancel(){this.dialog=!1},submit(){this.dialog=!1},nohint(e){this.dialog=!1,D(e)},oneInfo(e){this.oneDialog=!0;var o={};o[this.idkey]=e[this.idkey],V(o).then((e=>{this.oneModel=e.data}))},oneCancel(){this.oneDialog=!1},oneSubmit(){this.oneDialog=!1},oneNohint(e){this.oneDialog=!1,D(e)}}},[["render",function(M,v,b,D,C,V){const U=w,$=k,E=c,N=y,I=x,P=j,T=_,A=h,F=g,H=f,L=u;return e(),o("div",null,[t(P,{modelValue:C.dialog,"onUpdate:modelValue":v[4]||(v[4]=e=>C.dialog=e),title:C.dialogTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":V.cancel,top:"10vh",center:""},{footer:i((()=>[t(E,{text:"",onClick:v[3]||(v[3]=e=>V.nohint(C.count))},{default:i((()=>[l(a(M.$t("common.Don not prompt again")),1)])),_:1}),t(E,{text:"",onClick:V.submit},{default:i((()=>[l(a(M.$t("common.close")),1)])),_:1},8,["onClick"])])),default:i((()=>[n((e(),s(N,{ref:"table",data:C.data,height:C.height-200,"show-header":!1},{default:i((()=>[t($,{prop:"image_id","min-width":"90"},{default:i((e=>[t(U,{"file-url":e.row.image_url,lazy:""},null,8,["file-url"])])),_:1}),t($,{prop:"title","min-width":"250","show-overflow-tooltip":""},{default:i((e=>[r("span",{style:d({color:e.row.title_color})},a(e.row.title),5)])),_:1}),t($,{prop:"start_time",width:"165"}),t($,{width:"100"},{default:i((e=>[t(E,{text:"",type:"primary",onClick:o=>V.info(e.row)},{default:i((()=>[l(a(M.$t("common.view")),1)])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","height"])),[[L,C.loading]]),n(t(I,{total:C.count,"onUpdate:total":v[0]||(v[0]=e=>C.count=e),page:C.query.page,"onUpdate:page":v[1]||(v[1]=e=>C.query.page=e),limit:C.query.limit,"onUpdate:limit":v[2]||(v[2]=e=>C.query.limit=e),background:!1,layout:"prev, pager, next",onPagination:V.list},null,8,["total","page","limit","onPagination"]),[[m,C.count>0]])])),_:1},8,["modelValue","title","before-close"]),t(P,{modelValue:C.oneDialog,"onUpdate:modelValue":v[7]||(v[7]=e=>C.oneDialog=e),"close-on-click-modal":!1,"close-on-press-escape":!1,top:"18vh",width:"33%",center:""},{header:i((()=>[r("span",{style:d({color:C.oneModel.title_color})},a(C.oneModel.title),5)])),footer:i((()=>[t(E,{onClick:v[5]||(v[5]=e=>V.oneNohint(C.count))},{default:i((()=>[l(a(M.$t("common.Don not prompt again")),1)])),_:1}),t(E,{onClick:V.oneSubmit},{default:i((()=>[l(a(M.$t("common.close")),1)])),_:1},8,["onClick"]),t(E,{type:"primary",onClick:v[6]||(v[6]=e=>V.info(C.oneModel))},{default:i((()=>[l(a(M.$t("common.view")),1)])),_:1})])),default:i((()=>[t(H,{native:"",height:430},{default:i((()=>[t(F,{ref:"ref",model:C.oneModel,"label-width":"0",class:"text-center"},{default:i((()=>[t(A,{prop:"start_time"},{default:i((()=>[t(T,{class:"text-center"},{default:i((()=>[l(a(C.oneModel.start_time),1)])),_:1})])),_:1}),C.oneModel.image_url?(e(),s(A,{key:0,prop:"image_url"},{default:i((()=>[t(U,{"file-url":C.oneModel.image_url,height:150},null,8,["file-url"])])),_:1})):p("",!0),t(A,{prop:"desc"},{default:i((()=>[t(T,{class:"text-center"},{default:i((()=>[l(a(C.oneModel.desc),1)])),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"]),t(P,{modelValue:C.infoDialog,"onUpdate:modelValue":v[8]||(v[8]=e=>C.infoDialog=e),"close-on-click-modal":!1,"close-on-press-escape":!1,top:"9vh",center:""},{header:i((()=>[r("span",{style:d({color:C.infoModel.title_color})},a(C.infoModel.title),5)])),default:i((()=>[t(H,{native:"",height:C.height},{default:i((()=>[t(F,{ref:"ref",model:C.infoModel,"label-width":"0",class:"text-center"},{default:i((()=>[t(A,{prop:"start_time"},{default:i((()=>[t(T,{class:"text-center"},{default:i((()=>[l(a(C.infoModel.start_time),1)])),_:1})])),_:1}),C.infoModel.image_url?(e(),s(A,{key:0,prop:"image_url"},{default:i((()=>[t(U,{"file-url":C.infoModel.image_url,height:150},null,8,["file-url"])])),_:1})):p("",!0),t(A,{prop:"desc"},{default:i((()=>[t(T,{class:"text-center"},{default:i((()=>[l(a(C.infoModel.desc),1)])),_:1})])),_:1}),t(A,{prop:"content"},{default:i((()=>[t(T,{class:"text-center"},{default:i((()=>[r("div",{innerHTML:C.infoModel.content},null,8,q)])),_:1})])),_:1})])),_:1},8,["model"])])),_:1},8,["height"])])),_:1},8,["modelValue"])])}]]);export{$ as default};

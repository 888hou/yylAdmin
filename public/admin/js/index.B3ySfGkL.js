import{b as e,g as t,aS as o,aW as a,cz as l,d as n,u as r,aX as i,d3 as u,d4 as s,r as d,C as f,aF as c,K as p,o as v,G as m,bG as g,aA as h,V as y,a as w,c as b,j as _,e as x,n as C,f as $,an as O,_ as E,q as V,ch as j,d5 as S,d6 as A,d7 as F,d8 as P,d9 as N,a6 as B,da as I,db as T,L as z,a3 as D,w as H,bV as U}from"./index.B1EzHEmU.js";import{E as L}from"./el-dialog.CQ7599ig.js";import{F as M}from"./index.S7KU-L6s.js";const k=e({zIndex:{type:t([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),q={scroll:({scrollTop:e,fixed:t})=>o(e)&&a(t),[l]:e=>a(e)},G="ElAffix",J=n({name:G});const K=V(E(n({...J,props:k,emits:q,setup(e,{expose:t,emit:o}){const a=e,l=r("affix"),n=i(),E=i(),V=i(),{height:j}=u(),{height:S,width:A,top:F,bottom:P,update:N}=s(E,{windowScroll:!1}),B=s(n),I=d(!1),T=d(0),z=d(0),D=f((()=>({height:I.value?`${S.value}px`:"",width:I.value?`${A.value}px`:""}))),H=f((()=>{if(!I.value)return{};const e=a.offset?c(a.offset):0;return{height:`${S.value}px`,width:`${A.value}px`,top:"top"===a.position?e:"",bottom:"bottom"===a.position?e:"",transform:z.value?`translateY(${z.value}px)`:"",zIndex:a.zIndex}})),U=()=>{if(V.value)if(T.value=V.value instanceof Window?document.documentElement.scrollTop:V.value.scrollTop||0,"top"===a.position)if(a.target){const e=B.bottom.value-a.offset-S.value;I.value=a.offset>F.value&&B.bottom.value>0,z.value=e<0?e:0}else I.value=a.offset>F.value;else if(a.target){const e=j.value-B.top.value-a.offset-S.value;I.value=j.value-a.offset<P.value&&j.value>B.top.value,z.value=e<0?-e:0}else I.value=j.value-a.offset<P.value};return p(I,(e=>o("change",e))),v((()=>{var e;a.target?(n.value=null!=(e=document.querySelector(a.target))?e:void 0,n.value||m(G,`Target is not existed: ${a.target}`)):n.value=document.documentElement,V.value=g(E.value,!0),N()})),h(V,"scroll",(()=>{N(),o("scroll",{scrollTop:T.value,fixed:I.value})})),y(U),t({update:U,updateRoot:N}),(e,t)=>(w(),b("div",{ref_key:"root",ref:E,class:C($(l).b()),style:O($(D))},[_("div",{class:C({[$(l).m("fixed")]:I.value}),style:O($(H))},[x(e.$slots,"default")],6)],6))}}),[["__file","affix.vue"]]));var W=Object.defineProperty,R=Object.defineProperties,X=Object.getOwnPropertyDescriptors,Y=Object.getOwnPropertySymbols,Q=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable,ee=(e,t,o)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,te=(e,t)=>{for(var o in t||(t={}))Q.call(t,o)&&ee(e,o,t[o]);if(Y)for(var o of Y(t))Z.call(t,o)&&ee(e,o,t[o]);return e};function oe(e){let t=`请使用 '@${e}' 事件，不要放在 props 中`;return t+=`\nPlease use '@${e}' event instead of props`,t}var ae=(e,t)=>{for(const[o,a]of t)e[o]=a;return e};const le=n({props:{mode:{type:String,default:"default"},defaultContent:{type:Array,default:[]},defaultHtml:{type:String,default:""},defaultConfig:{type:Object,default:{}},modelValue:{type:String,default:""}},setup(e,t){const o=d(null),a=i(null),l=d("");return v((()=>{(()=>{if(!o.value)return;const n=j(e.defaultContent);var r,i;S({selector:o.value,mode:e.mode,content:n||[],html:e.defaultHtml||e.modelValue||"",config:(r=te({},e.defaultConfig),i={onCreated(o){if(a.value=o,t.emit("onCreated",o),e.defaultConfig.onCreated){const e=oe("onCreated");throw new Error(e)}},onChange(o){const a=o.getHtml();if(l.value=a,t.emit("update:modelValue",a),t.emit("onChange",o),e.defaultConfig.onChange){const e=oe("onChange");throw new Error(e)}},onDestroyed(o){if(t.emit("onDestroyed",o),e.defaultConfig.onDestroyed){const e=oe("onDestroyed");throw new Error(e)}},onMaxLength(o){if(t.emit("onMaxLength",o),e.defaultConfig.onMaxLength){const e=oe("onMaxLength");throw new Error(e)}},onFocus(o){if(t.emit("onFocus",o),e.defaultConfig.onFocus){const e=oe("onFocus");throw new Error(e)}},onBlur(o){if(t.emit("onBlur",o),e.defaultConfig.onBlur){const e=oe("onBlur");throw new Error(e)}},customAlert(o,a){if(t.emit("customAlert",o,a),e.defaultConfig.customAlert){const e=oe("customAlert");throw new Error(e)}},customPaste:(o,a)=>{if(e.defaultConfig.customPaste){const e=oe("customPaste");throw new Error(e)}let l;return t.emit("customPaste",o,a,(e=>{l=e})),l}},R(r,X(i)))})})()})),p((()=>e.modelValue),(e=>{e!==l.value&&function(e){const t=a.value;if(null==t)return;const o=t.isDisabled(),l=t.isFocused(),n=JSON.stringify(t.selection);if(t.enable(),t.focus(),t.select([]),t.deleteFragment(),A.setNodes(t,{type:"paragraph"},{mode:"highest"}),t.dangerouslyInsertHtml(e),!l)return t.deselect(),void t.blur();if(o)return t.deselect(),void t.disable();try{t.select(JSON.parse(n))}catch(r){t.select(F.start(t,[]))}}(e)})),{box:o}}}),ne={ref:"box",style:{height:"100%"}};var re=ae(le,[["render",function(e,t,o,a,l,n){return w(),b("div",ne,null,512)}]]);const ie=n({props:{editor:{type:Object},mode:{type:String,default:"default"},defaultConfig:{type:Object,default:{}}},setup(e){const t=d(null);return y((()=>{const{editor:o}=e;null!=o&&(o=>{if(t.value){if(null==o)throw new Error("Not found instance of Editor when create <Toolbar/> component");P.getToolbar(o)||N({editor:o,selector:t.value||"<div></div>",mode:e.mode,config:e.defaultConfig})}})(o)})),{selector:t}}}),ue={ref:"selector"};var se=ae(ie,[["render",function(e,t,o,a,l,n){return w(),b("div",ue,null,512)}]]);const de={class:"editor-wrapper"},fe={__name:"index",props:{modelValue:{type:[String],default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,a=B(),l=t;I("zh-cn"==a.language?"zh-CN":"en");const n=T(o,"modelValue",l),r=i(),u=d("default"),s=d({insertKeys:{index:24,keys:["uploadAttachment"]}}),f=d({placeholder:"请输入内容...",MENU_CONF:{uploadImage:{customBrowseAndUpload(){v.value=!0,g.value="image"}},uploadVideo:{customBrowseAndUpload(){v.value=!0,g.value="video"}},uploadAttachment:{customBrowseAndUpload(){v.value=!0,g.value="word"}}}}),c=e=>{r.value=e};function p(e){n.value=e.getHtml()}const v=d(!1),m=d("文件管理"),g=d("image");function h(){v.value=!1}function y(e){v.value=!1;var t="";const o=e.length;for(let a=0;a<o;a++)"image"===e[a].file_type?t+=`<img file-id="${e[a].file_id}" src="${e[a].file_url}" style="width:640px;"/>`:"video"===e[a].file_type?t+=`<div data-w-e-type="video" data-w-e-is-void><video width="640" height="480" controls>\n                <source file-id="${e[a].file_id}" src="${e[a].file_url}" type="video/mp4">\n                <object file-id="${e[a].file_id}" data="${e[a].file_url}">\n                  <embed file-id="${e[a].file_id}" src="${e[a].file_url}" width="640" height="480">\n                </object>\n              </video></div>`:"audio"===e[a].file_type?t+=`<div data-w-e-type="audio" data-w-e-is-void data-w-e-is-inline><audio controls>\n                <source file-id="${e[a].file_id}" src="${e[a].file_url}" type="audio/mp3">\n                <embed file-id="${e[a].file_id}" src="${e[a].file_url}">\n              </audio></div>`:t+=`<div data-w-e-type="attachment" data-w-e-is-void data-w-e-is-inline><a file-id="${e[a].file_id}" href="${e[a].file_url}" download="${e[a].file_url}" target="_blank">${e[a].file_name}.${e[a].file_ext}</a></div>`;r.value.dangerouslyInsertHtml(t)}return z((()=>{const e=r.value;null!=e&&e.destroy()})),(e,t)=>{const o=K,a=L;return w(),b("div",de,[D(o,{target:".editor-wrapper",offset:150},{default:H((()=>[D($(se),{id:"toolbar-container",editor:$(r),"default-config":$(s),mode:$(u)},null,8,["editor","default-config","mode"])])),_:1}),D($(re),{id:"editor-container",modelValue:$(n),"onUpdate:modelValue":t[0]||(t[0]=e=>U(n)?n.value=e:null),"default-config":$(f),mode:$(u),onOnChange:p,onOnCreated:c},null,8,["modelValue","default-config","mode"]),D(a,{modelValue:$(v),"onUpdate:modelValue":t[1]||(t[1]=e=>U(v)?v.value=e:null),title:$(m),"close-on-click-modal":!1,"close-on-press-escape":!1,top:"1vh",width:"80%","append-to-body":""},{default:H((()=>[D(M,{"file-type":$(g),onFileCancel:h,onFileSubmit:y},null,8,["file-type"])])),_:1},8,["modelValue","title"])])}}};export{fe as _};

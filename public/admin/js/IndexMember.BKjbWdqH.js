import{O as t,a as e,k as a,w as n,a3 as o,j as s,t as i,an as d}from"./index.Dxpxc0Wv.js";import{v as l}from"./el-loading.BCiGpebW.js";import{E as r}from"./el-card.CRUX5or8.js";import{E as p}from"./el-row.zIhwjUGa.js";import{E as m}from"./el-col.BYj1fpTj.js";import{E as h}from"./el-date-picker.CCbwDReu.js";import"./el-scrollbar.BKnRmybh.js";import"./el-popper.BLXyGuOS.js";import{a as c,E as g}from"./el-select.BU8tiYSJ.js";import{m as _}from"./index.CHP9ZS9_.js";import{_ as u}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{i as y,a as f}from"./install.ByHKIAuc.js";import{u as x,i as w,a as j,b as k,c as D}from"./installCanvasRenderer.Dli4la9x.js";import{i as C,a as b}from"./install.Cj_I8gz_.js";import{i as M}from"./install.BQ-TxXjT.js";import"./_Uint8Array.T21uhEY5.js";import"./debounce.DgKViq2u.js";import"./index.BwTiryq0.js";import"./isUndefined.DgmxjSXK.js";x([y,C,w,M,b,j,f,k]);const v=u({name:"SystemIndexMember",data:()=>({name:"会员统计",height:500,loading:!1,date_type:"day",date_range:[],date_ptype:"monthrange",date_format:"YYYY-MM",date_options:{},date_options_day:{shortcuts:[{text:"最近7天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-5184e5),t.$emit("pick",[a,e])}},{text:"最近30天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-25056e5),t.$emit("pick",[a,e])}},{text:"最近90天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-76896e5),t.$emit("pick",[a,e])}},{text:"最近120天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-102816e5),t.$emit("pick",[a,e])}}]},date_options_month:{shortcuts:[{text:"最近3个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-2),t.$emit("pick",[a,e])}},{text:"最近6个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-5),t.$emit("pick",[a,e])}},{text:"最近9个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-8),t.$emit("pick",[a,e])}},{text:"最近12个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-11),t.$emit("pick",[a,e])}}]}}),created(){this.stat()},methods:{stat(){this.loading=!0,_({type:this.date_type,date:this.date_range}).then((t=>{this.date_type=t.data.number.type,this.date_range=t.data.number.date,this.dateEchart(t.data.number,"numberEchart"),this.dateOptions(),this.loading=!1})).catch((()=>{this.loading=!1}))},typeChange(){this.dateOptions(),this.date_range=[]},dateOptions(){const t=this.date_type;"day"===t?(this.date_ptype="daterange",this.date_format="YYYY-MM-DD",this.date_options=this.date_options_day):"month"===t&&(this.date_ptype="monthrange",this.date_format="YYYY-MM",this.date_options=this.date_options_month)},dateChange(){this.stat()},dateEchart(t,e){var a=D(document.getElementById(e)),n={title:{left:"center"},legend:{top:"20px",data:t.legend,selected:{"总数":!1}},grid:{top:"80px",left:"1%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t.xAxis},yAxis:{type:"value"},tooltip:{trigger:"axis",textStyle:{align:"left"}},toolbox:{feature:{magicType:{show:!0,type:["line","bar"]},dataView:{show:!0,readOnly:!0},saveAsImage:{show:!0,name:this.name+t.date[0]+"-"+t.date[1]}}},series:t.series};a.setOption(n)}}},[["render",function(_,u,y,f,x,w){const j=c,k=g,D=h,C=m,b=p,M=r,v=l;return t((e(),a(M,null,{default:n((()=>[o(b,null,{default:n((()=>[s("span",null,i(x.name),1),o(C,{class:"text-center"},{default:n((()=>[o(k,{modelValue:x.date_type,"onUpdate:modelValue":u[0]||(u[0]=t=>x.date_type=t),class:"!w-[100px]",onChange:w.typeChange},{default:n((()=>[o(j,{label:"日",value:"day"}),o(j,{label:"月",value:"month"})])),_:1},8,["modelValue","onChange"]),o(D,{modelValue:x.date_range,"onUpdate:modelValue":u[1]||(u[1]=t=>x.date_range=t),type:x.date_ptype,"value-format":x.date_format,"picker-options":x.date_options,"start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:w.dateChange},null,8,["modelValue","type","value-format","picker-options","onChange"])])),_:1}),o(C,null,{default:n((()=>[s("div",{id:"numberEchart",style:d({height:x.height+"px"})},null,4)])),_:1})])),_:1})])),_:1})),[[v,x.loading]])}]]);export{v as default};

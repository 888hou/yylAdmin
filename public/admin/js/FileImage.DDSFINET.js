import{cE as e,cF as l,r as t,C as a,J as i,a as s,k as o,w as u,a2 as r,f as d,am as p,c as n,j as f,a9 as c,a1 as y,t as m,bU as v,ar as h}from"./index.DjA_re4j.js";import{E as g}from"./el-dialog.yRJSSox7.js";import{E as _}from"./el-row.BdhO5HhT.js";import{E as w}from"./el-text.w_ZtZ4uh.js";import{E as k}from"./el-col.Dga7oIhs.js";import{E as T}from"./el-avatar.D3u9l1HT.js";import{E as z}from"./el-image-viewer.fFYArL2i.js";import{_ as j}from"./index.DhRVrygn.js";import{F as b}from"./index.De39iDjm.js";const x={key:0},B=["src"],S=["data"],E=["src"],U=["src"],V=["src"],C={key:3},F={key:4},M={key:1},N={__name:"FileImage",props:e({fileType:{type:String,default:"image"},fileTitle:{type:String,default:"上传图片"},fileTip:{type:String,default:"图片小于200KB，jpg、png格式。"},height:{type:Number,default:30},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},previewTeleported:{type:Boolean,default:!0},uploadBtn:{type:String,default:"上传"},deleteBtn:{type:String,default:"删除"},avatar:{type:Boolean,default:!1},upload:{type:Boolean,default:!1}},{modelValue:{type:Number,default:0},modelModifiers:{},fileUrl:{type:String,default:""},fileUrlModifiers:{}}),emits:["update:modelValue","update:fileUrl"],setup(e){const N=l(e,"modelValue"),A=l(e,"fileUrl"),I=e,J=t(24),K=t(0),R=t(!1),q=a((()=>({height:I.height+"px"}))),D=a((()=>({height:I.height+"px"}))),G=a((()=>({height:I.height+"px"}))),H=a((()=>({width:"90%"}))),L=a((()=>.7*I.height+"px"));function O(){R.value=!1}function P(e){R.value=!1;const l=e.length;if(l){const t=l-1;N.value=e[t].file_id,A.value=e[t].file_url}}return i([()=>I.avatar,()=>I.upload],(([e,l])=>{e&&(D.value.width=I.height+"px",D.value.borderRadius="50%"),l&&(J.value=12,K.value=12)}),{immediate:!0}),(l,t)=>{const a=j,i=z,I=T,Q=k,W=h,X=w,Y=_,Z=g;return s(),o(Y,{style:{width:"100%"}},{default:u((()=>[r(Q,{span:d(J),style:p(d(q))},{default:u((()=>[A.value?(s(),n("div",x,["image"===e.fileType?(s(),o(i,{key:0,style:p(d(D)),src:A.value,fit:e.fit,"preview-src-list":[A.value],"preview-teleported":e.previewTeleported,lazy:e.lazy,title:"点击看大图"},{error:u((()=>[r(a,{"icon-class":"picture"})])),_:1},8,["style","src","fit","preview-src-list","preview-teleported","lazy"])):"video"===e.fileType?(s(),n("video",{key:1,style:p(d(G)),controls:""},[f("source",{src:A.value,type:"video/mp4"},null,8,B),f("object",{data:A.value,style:p(d(G))},[f("embed",{src:A.value,style:p(d(G))},null,12,E)],12,S)],4)):"audio"===e.fileType?(s(),n("audio",{key:2,style:p(d(H)),controls:""},[f("source",{src:A.value,type:"audio/mp3"},null,8,U),f("embed",{src:A.value,style:p(d(H))},null,12,V)],4)):"word"===e.fileType?(s(),n("div",C,[r(a,{"icon-class":"document",size:d(L)},null,8,["size"])])):"other"===e.fileType?(s(),n("div",F,[r(a,{"icon-class":"folder",size:d(L)},null,8,["size"])])):c("",!0)])):(s(),n("div",M,[e.avatar?(s(),o(I,{key:0,size:e.height},{default:u((()=>[r(a,{"icon-class":"user-filled",size:d(L)},null,8,["size"])])),_:1},8,["size"])):c("",!0)]))])),_:1},8,["span","style"]),r(Q,{span:d(K)},{default:u((()=>[r(Y,null,{default:u((()=>[r(Q,null,{default:u((()=>[r(W,{onClick:t[0]||(t[0]=e=>{R.value=!0})},{default:u((()=>[y(m(e.uploadBtn),1)])),_:1}),r(W,{onClick:t[1]||(t[1]=e=>(N.value=0,void(A.value="")))},{default:u((()=>[y(m(e.deleteBtn),1)])),_:1}),A.value?(s(),o(W,{key:0,onClick:t[2]||(t[2]=e=>{window.open(A.value,"_blank")})},{default:u((()=>[y("下载")])),_:1})):c("",!0)])),_:1}),r(Q,null,{default:u((()=>[r(X,{size:"default",truncated:"",title:e.fileTip},{default:u((()=>[y(m(e.fileTip),1)])),_:1},8,["title"])])),_:1})])),_:1})])),_:1},8,["span"]),r(Z,{modelValue:d(R),"onUpdate:modelValue":t[3]||(t[3]=e=>v(R)?R.value=e:null),title:e.fileTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"1vh",width:"80%","append-to-body":""},{default:u((()=>[r(b,{"file-type":e.fileType,onFileCancel:O,onFileSubmit:P},null,8,["file-type"])])),_:1},8,["modelValue","title"])])),_:1})}}};export{N as _};

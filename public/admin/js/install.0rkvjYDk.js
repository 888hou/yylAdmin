import{_ as t,ad as e,ac as n,M as i,b5 as o,b6 as a,t as r,v as s,q as l,z as u,b7 as c,b8 as p,n as d,y as h,x as f,aC as g,b9 as m,ba as v,aA as y,aR as x,Y as b,bb as _,m as S,bc as M,bd as A,ay as w,be as C,bf as I,bg as T,e as O,w as k,bh as D,E as P,bi as L,a7 as N,Z as R,bj as E,aB as z,k as V,bk as B,S as Z,bl as G,bm as W,bn as H,bo as Y,H as X,V as F,ai as U,bp as j,bq as q,d as $,br as J,I as K,U as Q,bs as tt,bt as et,bu as nt,aL as it,X as ot,a1 as at,bv as rt,aj as st,a2 as lt,aa as ut,g as ct,av as pt,bw as dt,bx as ht,by as ft,$ as gt,bz as mt,a3 as vt,ah as yt,a9 as xt,at as bt,bA as _t,bB as St,bC as Mt,a0 as At,j as wt,N as Ct,bD as It,bE as Tt,bF as Ot,u as kt}from"./installCanvasRenderer.MmUxJLTj.js";import{c as Dt,g as Pt,b as Lt,d as Nt,e as Rt,f as Et,h as zt}from"./install.n7a5RbVo.js";import{l as Vt,m as Bt}from"./install.UXgwT71J.js";const Zt=function(i){function o(){var t=null!==i&&i.apply(this,arguments)||this;return t.type=o.type,t.hasSymbolVisual=!0,t}return t(o,i),o.prototype.getInitialData=function(t){return Dt(null,this,{useEncodeDefaulter:!0})},o.prototype.getLegendIcon=function(t){var i=new e,o=n("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);i.add(o),o.setStyle(t.lineStyle);var a=this.getData().getVisual("symbol"),r=this.getData().getVisual("symbolRotate"),s="none"===a?"circle":a,l=.8*t.itemHeight,u=n(s,(t.itemWidth-l)/2,(t.itemHeight-l)/2,l,l,t.itemStyle.fill);i.add(u),u.setStyle(t.itemStyle);var c="inherit"===t.iconRotate?r:t.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([t.itemWidth/2,t.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),i},o.type="series.line",o.dependencies=["grid","polar"],o.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:Infinity,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},o}(i);var Gt=function(e){function i(t,n,i,o){var a=e.call(this)||this;return a.updateData(t,n,i,o),a}return t(i,e),i.prototype._createSymbol=function(t,e,i,o,a){this.removeAll();var r=n(t,-1,-1,2,2,null,a);r.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),r.drift=Wt,this._symbolType=t,this.add(r)},i.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},i.prototype.getSymbolType=function(){return this._symbolType},i.prototype.getSymbolPath=function(){return this.childAt(0)},i.prototype.highlight=function(){o(this.childAt(0))},i.prototype.downplay=function(){a(this.childAt(0))},i.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},i.prototype.setDraggable=function(t,e){var n=this.childAt(0);n.draggable=t,n.cursor=!e&&t?"move":n.cursor},i.prototype.updateData=function(t,e,n,o){this.silent=!1;var a=t.getItemVisual(e,"symbol")||"circle",u=t.hostModel,c=i.getSymbolSize(t,e),p=a!==this._symbolType,d=o&&o.disableAnimation;if(p){var h=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(a,t,e,c,h)}else{(g=this.childAt(0)).silent=!1;var f={scaleX:c[0]/2,scaleY:c[1]/2};d?g.attr(f):r(g,f,u,e),s(g)}if(this._updateCommon(t,e,c,n,o),p){var g=this.childAt(0);if(!d){f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:g.style.opacity}};g.scaleX=g.scaleY=0,g.style.opacity=0,l(g,f,u,e)}}d&&this.childAt(0).stopAnimation("leave")},i.prototype._updateCommon=function(t,e,n,i,o){var a,r,s,l,g,m,v,y,x,b=this.childAt(0),_=t.hostModel;if(i&&(a=i.emphasisItemStyle,r=i.blurItemStyle,s=i.selectItemStyle,l=i.focus,g=i.blurScope,v=i.labelStatesModels,y=i.hoverScale,x=i.cursorStyle,m=i.emphasisDisabled),!i||t.hasItemOption){var S=i&&i.itemModel?i.itemModel:t.getItemModel(e),M=S.getModel("emphasis");a=M.getModel("itemStyle").getItemStyle(),s=S.getModel(["select","itemStyle"]).getItemStyle(),r=S.getModel(["blur","itemStyle"]).getItemStyle(),l=M.get("focus"),g=M.get("blurScope"),m=M.get("disabled"),v=u(S),y=M.getShallow("scale"),x=S.getShallow("cursor")}var A=t.getItemVisual(e,"symbolRotate");b.attr("rotation",(A||0)*Math.PI/180||0);var w=c(t.getItemVisual(e,"symbolOffset"),n);w&&(b.x=w[0],b.y=w[1]),x&&b.attr("cursor",x);var C=t.getItemVisual(e,"style"),I=C.fill;if(b instanceof p){var T=b.style;b.useStyle(d({image:T.image,x:T.x,y:T.y,width:T.width,height:T.height},C))}else b.__isEmptyBrush?b.useStyle(d({},C)):b.useStyle(C),b.style.decal=null,b.setColor(I,o&&o.symbolInnerColor),b.style.strokeNoScale=!0;var O=t.getItemVisual(e,"liftZ"),k=this._z2;null!=O?null==k&&(this._z2=b.z2,b.z2+=O):null!=k&&(b.z2=k,this._z2=null);var D=o&&o.useNameLabel;h(b,v,{labelFetcher:_,labelDataIndex:e,defaultText:function(e){return D?t.getName(e):Pt(t,e)},inheritColor:I,defaultOpacity:C.opacity}),this._sizeX=n[0]/2,this._sizeY=n[1]/2;var P=b.ensureState("emphasis");P.style=a,b.ensureState("select").style=s,b.ensureState("blur").style=r;var L=null==y||!0===y?Math.max(1.1,3/this._sizeY):isFinite(y)&&y>0?+y:1;P.scaleX=this._sizeX*L,P.scaleY=this._sizeY*L,this.setSymbolScale(1),f(this,l,g,m)},i.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},i.prototype.fadeOut=function(t,e,n){var i=this.childAt(0),o=g(this).dataIndex,a=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var r=i.getTextContent();r&&m(r,{style:{opacity:0}},e,{dataIndex:o,removeOpt:a,cb:function(){i.removeTextContent()}})}else i.removeTextContent();m(i,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:o,cb:t,removeOpt:a})},i.getSymbolSize=function(t,e){return v(t.getItemVisual(e,"symbolSize"))},i}(e);function Wt(t,e){this.parent.drift(t,e)}function Ht(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function Yt(t){return null==t||x(t)||(t={isIgnore:t}),t||{}}function Xt(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:u(e),cursorStyle:e.get("cursor")}}var Ft=function(){function t(t){this.group=new e,this._SymbolCtor=t||Gt}return t.prototype.updateData=function(t,e){this._progressiveEls=null,e=Yt(e);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,s=e.disableAnimation,l=Xt(t),u={disableAnimation:s},c=e.getSymbolPoint||function(e){return t.getItemLayout(e)};o||n.removeAll(),t.diff(o).add((function(i){var o=c(i);if(Ht(t,o,i,e)){var r=new a(t,i,l,u);r.setPosition(o),t.setItemGraphicEl(i,r),n.add(r)}})).update((function(p,d){var h=o.getItemGraphicEl(d),f=c(p);if(Ht(t,f,p,e)){var g=t.getItemVisual(p,"symbol")||"circle",m=h&&h.getSymbolType&&h.getSymbolType();if(!h||m&&m!==g)n.remove(h),(h=new a(t,p,l,u)).setPosition(f);else{h.updateData(t,p,l,u);var v={x:f[0],y:f[1]};s?h.attr(v):r(h,v,i)}n.add(h),t.setItemGraphicEl(p,h)}else n.remove(h)})).remove((function(t){var e=o.getItemGraphicEl(t);e&&e.fadeOut((function(){n.remove(e)}),i)})).execute(),this._getSymbolPoint=c,this._data=t},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl((function(e,n){var i=t._getSymbolPoint(n);e.setPosition(i),e.markRedraw()}))},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Xt(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],n=Yt(n);for(var o=t.start;o<t.end;o++){var a=e.getItemLayout(o);if(Ht(e,a,o,n)){var r=new this._SymbolCtor(e,o,this._seriesScope);r.traverse(i),r.setPosition(a),this.group.add(r),e.setItemGraphicEl(o,r),this._progressiveEls.push(r)}}},t.prototype.eachRendered=function(t){y(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}),n.hostModel)})):e.removeAll()},t}();function Ut(t,e,n){var i=t.getBaseAxis(),o=t.getOtherAxis(i),a=function(t,e){var n=0,i=t.scale.getExtent();"start"===e?n=i[0]:"end"===e?n=i[1]:S(e)&&!isNaN(e)?n=e:i[0]>0?n=i[0]:i[1]<0&&(n=i[1]);return n}(o,n),r=i.dim,s=o.dim,l=e.mapDimension(s),u=e.mapDimension(r),c="x"===s||"radius"===s?1:0,p=b(t.dimensions,(function(t){return e.mapDimension(t)})),d=!1,h=e.getCalculationInfo("stackResultDimension");return _(e,p[0])&&(d=!0,p[0]=h),_(e,p[1])&&(d=!0,p[1]=h),{dataDimsForPoint:p,valueStart:a,valueAxisDim:s,baseAxisDim:r,stacked:!!d,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function jt(t,e,n,i){var o=NaN;t.stacked&&(o=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(o)&&(o=t.valueStart);var a=t.baseDataOffset,r=[];return r[a]=n.get(t.baseDim,i),r[1-a]=o,e.dataToPoint(r)}var qt=Math.min,$t=Math.max;function Jt(t,e){return isNaN(t)||isNaN(e)}function Kt(t,e,n,i,o,a,r,s,l){for(var u,c,p,d,h,f,g=n,m=0;m<i;m++){var v=e[2*g],y=e[2*g+1];if(g>=o||g<0)break;if(Jt(v,y)){if(l){g+=a;continue}break}if(g===n)t[a>0?"moveTo":"lineTo"](v,y),p=v,d=y;else{var x=v-u,b=y-c;if(x*x+b*b<.5){g+=a;continue}if(r>0){for(var _=g+a,S=e[2*_],M=e[2*_+1];S===v&&M===y&&m<i;)m++,g+=a,S=e[2*(_+=a)],M=e[2*_+1],x=(v=e[2*g])-u,b=(y=e[2*g+1])-c;var A=m+1;if(l)for(;Jt(S,M)&&A<i;)A++,S=e[2*(_+=a)],M=e[2*_+1];var w=.5,C=0,I=0,T=void 0,O=void 0;if(A>=i||Jt(S,M))h=v,f=y;else{C=S-u,I=M-c;var k=v-u,D=S-v,P=y-c,L=M-y,N=void 0,R=void 0;if("x"===s){var E=C>0?1:-1;h=v-E*(N=Math.abs(k))*r,f=y,T=v+E*(R=Math.abs(D))*r,O=y}else if("y"===s){var z=I>0?1:-1;h=v,f=y-z*(N=Math.abs(P))*r,T=v,O=y+z*(R=Math.abs(L))*r}else N=Math.sqrt(k*k+P*P),h=v-C*r*(1-(w=(R=Math.sqrt(D*D+L*L))/(R+N))),f=y-I*r*(1-w),O=y+I*r*w,T=qt(T=v+C*r*w,$t(S,v)),O=qt(O,$t(M,y)),T=$t(T,qt(S,v)),f=y-(I=(O=$t(O,qt(M,y)))-y)*N/R,h=qt(h=v-(C=T-v)*N/R,$t(u,v)),f=qt(f,$t(c,y)),T=v+(C=v-(h=$t(h,qt(u,v))))*R/N,O=y+(I=y-(f=$t(f,qt(c,y))))*R/N}t.bezierCurveTo(p,d,h,f,v,y),p=T,d=O}else t.lineTo(v,y)}u=v,c=y,g+=a}return m}var Qt=function(){return function(){this.smooth=0,this.smoothConstraint=!0}}(),te=function(e){function n(t){var n=e.call(this,t)||this;return n.type="ec-polyline",n}return t(n,e),n.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},n.prototype.getDefaultShape=function(){return new Qt},n.prototype.buildPath=function(t,e){var n=e.points,i=0,o=n.length/2;if(e.connectNulls){for(;o>0&&Jt(n[2*o-2],n[2*o-1]);o--);for(;i<o&&Jt(n[2*i],n[2*i+1]);i++);}for(;i<o;)i+=Kt(t,n,i,o,o,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},n.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,i,o=this.path.data,a=C.CMD,r="x"===e,s=[],l=0;l<o.length;){var u=void 0,c=void 0,p=void 0,d=void 0,h=void 0,f=void 0,g=void 0;switch(o[l++]){case a.M:n=o[l++],i=o[l++];break;case a.L:if(u=o[l++],c=o[l++],(g=r?(t-n)/(u-n):(t-i)/(c-i))<=1&&g>=0){var m=r?(c-i)*g+i:(u-n)*g+n;return r?[t,m]:[m,t]}n=u,i=c;break;case a.C:u=o[l++],c=o[l++],p=o[l++],d=o[l++],h=o[l++],f=o[l++];var v=r?A(n,u,p,h,t,s):A(i,c,d,f,t,s);if(v>0)for(var y=0;y<v;y++){var x=s[y];if(x<=1&&x>=0){m=r?I(i,c,d,f,x):I(n,u,p,h,x);return r?[t,m]:[m,t]}}n=h,i=f}}},n}(w),ee=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}(Qt),ne=function(e){function n(t){var n=e.call(this,t)||this;return n.type="ec-polygon",n}return t(n,e),n.prototype.getDefaultShape=function(){return new ee},n.prototype.buildPath=function(t,e){var n=e.points,i=e.stackedOnPoints,o=0,a=n.length/2,r=e.smoothMonotone;if(e.connectNulls){for(;a>0&&Jt(n[2*a-2],n[2*a-1]);a--);for(;o<a&&Jt(n[2*o],n[2*o+1]);o++);}for(;o<a;){var s=Kt(t,n,o,a,a,1,e.smooth,r,e.connectNulls);Kt(t,i,o+s-1,s,a,-1,e.stackedOnSmooth,r,e.connectNulls),o+=s+1,t.closePath()}},n}(w);function ie(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function oe(t){for(var e=Infinity,n=Infinity,i=-Infinity,o=-Infinity,a=0;a<t.length;){var r=t[a++],s=t[a++];isNaN(r)||(e=Math.min(r,e),i=Math.max(r,i)),isNaN(s)||(n=Math.min(s,n),o=Math.max(s,o))}return[[e,n],[i,o]]}function ae(t,e){var n=oe(t),i=n[0],o=n[1],a=oe(e),r=a[0],s=a[1];return Math.max(Math.abs(i[0]-r[0]),Math.abs(i[1]-r[1]),Math.abs(o[0]-s[0]),Math.abs(o[1]-s[1]))}function re(t){return S(t)?t:t?.5:0}function se(t,e,n,i){var o=e.getBaseAxis(),a="x"===o.dim||"radius"===o.dim?0:1,r=[],s=0,l=[],u=[],c=[],p=[];if(i){for(s=0;s<t.length;s+=2)isNaN(t[s])||isNaN(t[s+1])||p.push(t[s],t[s+1]);t=p}for(s=0;s<t.length-2;s+=2)switch(c[0]=t[s+2],c[1]=t[s+3],u[0]=t[s],u[1]=t[s+1],r.push(u[0],u[1]),n){case"end":l[a]=c[a],l[1-a]=u[1-a],r.push(l[0],l[1]);break;case"middle":var d=(u[a]+c[a])/2,h=[];l[a]=h[a]=d,l[1-a]=u[1-a],h[1-a]=c[1-a],r.push(l[0],l[1]),r.push(h[0],h[1]);break;default:l[a]=u[a],l[1-a]=c[1-a],r.push(l[0],l[1])}return r.push(t[s++],t[s++]),r}function le(t,e,n){var i=t.getVisual("visualMeta");if(i&&i.length&&t.count()&&"cartesian2d"===e.type){for(var o,a,r=i.length-1;r>=0;r--){var s=t.getDimensionInfo(i[r].dimension);if("x"===(o=s&&s.coordDim)||"y"===o){a=i[r];break}}if(a){var l=e.getAxis(o),u=b(a.stops,(function(t){return{coord:l.toGlobalCoord(l.dataToCoord(t.value)),color:t.color}})),c=u.length,p=a.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),p.reverse());var d=function(t,e){var n,i,o=[],a=t.length;function r(t,e,n){var i=t.coord,o=(n-i)/(e.coord-i);return{coord:n,color:G(o,[t.color,e.color])}}for(var s=0;s<a;s++){var l=t[s],u=l.coord;if(u<0)n=l;else{if(u>e){i?o.push(r(i,l,e)):n&&o.push(r(n,l,0),r(n,l,e));break}n&&(o.push(r(n,l,0)),n=null),o.push(l),i=l}}return o}(u,"x"===o?n.getWidth():n.getHeight()),h=d.length;if(!h&&c)return u[0].coord<0?p[1]?p[1]:u[c-1].color:p[0]?p[0]:u[0].color;var f=d[0].coord-10,g=d[h-1].coord+10,m=g-f;if(m<.001)return"transparent";V(d,(function(t){t.offset=(t.coord-f)/m})),d.push({offset:h?d[h-1].offset:.5,color:p[1]||"transparent"}),d.unshift({offset:h?d[0].offset:.5,color:p[0]||"transparent"});var v=new B(0,0,0,0,d,!0);return v[o]=f,v[o+"2"]=g,v}}}function ue(t,e,n){var i=t.get("showAllSymbol"),o="auto"===i;if(!i||o){var a=n.getAxesByScale("ordinal")[0];if(a&&(!o||!function(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var o=e.count(),a=Math.max(1,Math.round(o/5)),r=0;r<o;r+=a)if(1.5*Gt.getSymbolSize(e,r)[t.isHorizontal()?1:0]>i)return!1;return!0}(a,e))){var r=e.mapDimension(a.dim),s={};return V(a.getViewLabels(),(function(t){var e=a.scale.getRawOrdinalNumber(t.tickValue);s[e]=1})),function(t){return!s.hasOwnProperty(e.get(r,t))}}}}function ce(t,e){return[t[2*e],t[2*e+1]]}function pe(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<Z.length;e++)if(t.get([Z[e],"endLabel","show"]))return!0;return!1}function de(t,e,n,i){if(Nt(e,"cartesian2d")){var o=i.getModel("endLabel"),a=o.get("valueAnimation"),r=i.getData(),s={lastFrameIndex:0},l=pe(i)?function(n,i){t._endLabelOnDuring(n,i,r,s,a,o,e)}:null,u=e.getBaseAxis().isHorizontal(),c=Rt(e,n,i,(function(){var e=t._endLabel;e&&n&&null!=s.originalX&&e.attr({x:s.originalX,y:s.originalY})}),l);if(!i.get("clip",!0)){var p=c.shape,d=Math.max(p.width,p.height);u?(p.y-=d,p.height+=2*d):(p.x-=d,p.width+=2*d)}return l&&l(1,c),c}return Et(e,n,i)}const he=function(n){function i(){return null!==n&&n.apply(this,arguments)||this}return t(i,n),i.prototype.init=function(){var t=new e,n=new Ft;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=t},i.prototype.render=function(t,e,n){var i=this,o=t.coordinateSystem,a=this.group,r=t.getData(),s=t.getModel("lineStyle"),u=t.getModel("areaStyle"),c=r.getLayout("points")||[],p="polar"===o.type,d=this._coordSys,h=this._symbolDraw,m=this._polyline,v=this._polygon,y=this._lineGroup,x=!e.ssr&&t.isAnimationEnabled(),b=!u.isEmpty(),_=u.get("origin"),S=Ut(o,r,_),A=b&&function(t,e,n){if(!n.valueDim)return[];for(var i=e.count(),o=M(2*i),a=0;a<i;a++){var r=jt(n,t,e,a);o[2*a]=r[0],o[2*a+1]=r[1]}return o}(o,r,S),w=t.get("showSymbol"),C=t.get("connectNulls"),I=w&&!p&&ue(t,r,o),D=this._data;D&&D.eachItemGraphicEl((function(t,e){t.__temp&&(a.remove(t),D.setItemGraphicEl(e,null))})),w||h.remove(),a.add(y);var P,L=!p&&t.get("step");o&&o.getArea&&t.get("clip",!0)&&(null!=(P=o.getArea()).width?(P.x-=.1,P.y-=.1,P.width+=.2,P.height+=.2):P.r0&&(P.r0-=.5,P.r+=.5)),this._clipShapeForSymbol=P;var N=le(r,o,n)||r.getVisual("style")[r.getVisual("drawType")];if(m&&d.type===o.type&&L===this._step){b&&!v?v=this._newPolygon(c,A):v&&!b&&(y.remove(v),v=this._polygon=null),p||this._initOrUpdateEndLabel(t,o,T(N));var R=y.getClipPath();if(R){var E=de(this,o,!1,t);l(R,{shape:E.shape},t)}else y.setClipPath(de(this,o,!0,t));w&&h.updateData(r,{isIgnore:I,clipShape:P,disableAnimation:!0,getSymbolPoint:function(t){return[c[2*t],c[2*t+1]]}}),ie(this._stackedOnPoints,A)&&ie(this._points,c)||(x?this._doUpdateAnimation(r,A,o,n,L,_,C):(L&&(c=se(c,o,L,C),A&&(A=se(A,o,L,C))),m.setShape({points:c}),v&&v.setShape({points:c,stackedOnPoints:A})))}else w&&h.updateData(r,{isIgnore:I,clipShape:P,disableAnimation:!0,getSymbolPoint:function(t){return[c[2*t],c[2*t+1]]}}),x&&this._initSymbolLabelAnimation(r,o,P),L&&(c=se(c,o,L,C),A&&(A=se(A,o,L,C))),m=this._newPolyline(c),b?v=this._newPolygon(c,A):v&&(y.remove(v),v=this._polygon=null),p||this._initOrUpdateEndLabel(t,o,T(N)),y.setClipPath(de(this,o,!0,t));var z=t.getModel("emphasis"),V=z.get("focus"),B=z.get("blurScope"),Z=z.get("disabled");(m.useStyle(O(s.getLineStyle(),{fill:"none",stroke:N,lineJoin:"bevel"})),k(m,t,"lineStyle"),m.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"]))&&(m.getState("emphasis").style.lineWidth=+m.style.lineWidth+1);g(m).seriesIndex=t.seriesIndex,f(m,V,B,Z);var G=re(t.get("smooth")),W=t.get("smoothMonotone");if(m.setShape({smooth:G,smoothMonotone:W,connectNulls:C}),v){var H=r.getCalculationInfo("stackedOnSeries"),Y=0;v.useStyle(O(u.getAreaStyle(),{fill:N,opacity:.7,lineJoin:"bevel",decal:r.getVisual("style").decal})),H&&(Y=re(H.get("smooth"))),v.setShape({smooth:G,stackedOnSmooth:Y,smoothMonotone:W,connectNulls:C}),k(v,t,"areaStyle"),g(v).seriesIndex=t.seriesIndex,f(v,V,B,Z)}var X=function(t){i._changePolyState(t)};r.eachItemGraphicEl((function(t){t&&(t.onHoverStateChange=X)})),this._polyline.onHoverStateChange=X,this._data=r,this._coordSys=o,this._stackedOnPoints=A,this._points=c,this._step=L,this._valueOrigin=_,t.get("triggerLineEvent")&&(this.packEventData(t,m),v&&this.packEventData(t,v))},i.prototype.packEventData=function(t,e){g(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},i.prototype.highlight=function(t,e,n,i){var o=t.getData(),a=D(o,i);if(this._changePolyState("emphasis"),!(a instanceof Array)&&null!=a&&a>=0){var r=o.getLayout("points"),s=o.getItemGraphicEl(a);if(!s){var l=r[2*a],u=r[2*a+1];if(isNaN(l)||isNaN(u))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,u))return;var c=t.get("zlevel")||0,p=t.get("z")||0;(s=new Gt(o,a)).x=l,s.y=u,s.setZ(c,p);var d=s.getSymbolPath().getTextContent();d&&(d.zlevel=c,d.z=p,d.z2=this._polyline.z2+1),s.__temp=!0,o.setItemGraphicEl(a,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else P.prototype.highlight.call(this,t,e,n,i)},i.prototype.downplay=function(t,e,n,i){var o=t.getData(),a=D(o,i);if(this._changePolyState("normal"),null!=a&&a>=0){var r=o.getItemGraphicEl(a);r&&(r.__temp?(o.setItemGraphicEl(a,null),this.group.remove(r)):r.downplay())}else P.prototype.downplay.call(this,t,e,n,i)},i.prototype._changePolyState=function(t){var e=this._polygon;L(this._polyline,t),e&&L(e,t)},i.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new te({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},i.prototype._newPolygon=function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new ne({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},i.prototype._initSymbolLabelAnimation=function(t,e,n){var i,o,a=e.getBaseAxis(),r=a.inverse;"cartesian2d"===e.type?(i=a.isHorizontal(),o=!1):"polar"===e.type&&(i="angle"===a.dim,o=!0);var s=t.hostModel,l=s.get("animationDuration");N(l)&&(l=l(null));var u=s.get("animationDelay")||0,c=N(u)?u(null):u;t.eachItemGraphicEl((function(t,a){var s=t;if(s){var p=[t.x,t.y],d=void 0,h=void 0,f=void 0;if(n)if(o){var g=n,m=e.pointToCoord(p);i?(d=g.startAngle,h=g.endAngle,f=-m[1]/180*Math.PI):(d=g.r0,h=g.r,f=m[0])}else{var v=n;i?(d=v.x,h=v.x+v.width,f=t.x):(d=v.y+v.height,h=v.y,f=t.y)}var y=h===d?0:(f-d)/(h-d);r&&(y=1-y);var x=N(u)?u(a):l*y+c,b=s.getSymbolPath(),_=b.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:x}),_&&_.animateFrom({style:{opacity:0}},{duration:300,delay:x}),b.disableLabelAnimation=!0}}))},i.prototype._initOrUpdateEndLabel=function(t,e,n){var i=t.getModel("endLabel");if(pe(t)){var o=t.getData(),a=this._polyline,r=o.getLayout("points");if(!r)return a.removeTextContent(),void(this._endLabel=null);var s=this._endLabel;s||((s=this._endLabel=new R({z2:200})).ignoreClip=!0,a.setTextContent(this._endLabel),a.disableLabelAnimation=!0);var l=function(t){for(var e,n,i=t.length/2;i>0&&(e=t[2*i-2],n=t[2*i-1],isNaN(e)||isNaN(n));i--);return i-1}(r);l>=0&&(h(a,u(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:l,defaultText:function(t,e,n){return null!=n?Lt(o,n):Pt(o,t)},enableTextSetter:!0},function(t,e){var n=e.getBaseAxis(),i=n.isHorizontal(),o=n.inverse,a=i?o?"right":"left":"center",r=i?"middle":o?"top":"bottom";return{normal:{align:t.get("align")||a,verticalAlign:t.get("verticalAlign")||r}}}(i,e)),a.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},i.prototype._endLabelOnDuring=function(t,e,n,i,o,a,r){var s=this._endLabel,l=this._polyline;if(s){t<1&&null==i.originalX&&(i.originalX=s.x,i.originalY=s.y);var u=n.getLayout("points"),c=n.hostModel,p=c.get("connectNulls"),d=a.get("precision"),h=a.get("distance")||0,f=r.getBaseAxis(),g=f.isHorizontal(),m=f.inverse,v=e.shape,y=m?g?v.x:v.y+v.height:g?v.x+v.width:v.y,x=(g?h:0)*(m?-1:1),b=(g?0:-h)*(m?-1:1),_=g?"x":"y",S=function(t,e,n){for(var i,o,a=t.length/2,r="x"===n?0:1,s=0,l=-1,u=0;u<a;u++)if(o=t[2*u+r],!isNaN(o)&&!isNaN(t[2*u+1-r]))if(0!==u){if(i<=e&&o>=e||i>=e&&o<=e){l=u;break}s=u,i=o}else i=o;return{range:[s,l],t:(e-i)/(o-i)}}(u,y,_),M=S.range,A=M[1]-M[0],w=void 0;if(A>=1){if(A>1&&!p){var C=ce(u,M[0]);s.attr({x:C[0]+x,y:C[1]+b}),o&&(w=c.getRawValue(M[0]))}else{(C=l.getPointOn(y,_))&&s.attr({x:C[0]+x,y:C[1]+b});var I=c.getRawValue(M[0]),T=c.getRawValue(M[1]);o&&(w=E(n,d,I,T,S.t))}i.lastFrameIndex=M[0]}else{var O=1===t||i.lastFrameIndex>0?M[0]:0;C=ce(u,O);o&&(w=c.getRawValue(O)),s.attr({x:C[0]+x,y:C[1]+b})}if(o){var k=z(s);"function"==typeof k.setLabelText&&k.setLabelText(w)}}},i.prototype._doUpdateAnimation=function(t,e,n,i,o,a,s){var l=this._polyline,u=this._polygon,c=t.hostModel,p=function(t,e,n,i,o,a,r,s){for(var l=function(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}(t,e),u=[],c=[],p=[],d=[],h=[],f=[],g=[],m=Ut(o,e,r),v=t.getLayout("points")||[],y=e.getLayout("points")||[],x=0;x<l.length;x++){var b=l[x],_=!0,S=void 0,A=void 0;switch(b.cmd){case"=":S=2*b.idx,A=2*b.idx1;var w=v[S],C=v[S+1],I=y[A],T=y[A+1];(isNaN(w)||isNaN(C))&&(w=I,C=T),u.push(w,C),c.push(I,T),p.push(n[S],n[S+1]),d.push(i[A],i[A+1]),g.push(e.getRawIndex(b.idx1));break;case"+":var O=b.idx,k=m.dataDimsForPoint,D=o.dataToPoint([e.get(k[0],O),e.get(k[1],O)]);A=2*O,u.push(D[0],D[1]),c.push(y[A],y[A+1]);var P=jt(m,o,e,O);p.push(P[0],P[1]),d.push(i[A],i[A+1]),g.push(e.getRawIndex(O));break;case"-":_=!1}_&&(h.push(b),f.push(f.length))}f.sort((function(t,e){return g[t]-g[e]}));var L=u.length,N=M(L),R=M(L),E=M(L),z=M(L),V=[];for(x=0;x<f.length;x++){var B=f[x],Z=2*x,G=2*B;N[Z]=u[G],N[Z+1]=u[G+1],R[Z]=c[G],R[Z+1]=c[G+1],E[Z]=p[G],E[Z+1]=p[G+1],z[Z]=d[G],z[Z+1]=d[G+1],V[x]=h[B]}return{current:N,next:R,stackedOnCurrent:E,stackedOnNext:z,status:V}}(this._data,t,this._stackedOnPoints,e,this._coordSys,0,this._valueOrigin),d=p.current,h=p.stackedOnCurrent,f=p.next,g=p.stackedOnNext;if(o&&(d=se(p.current,n,o,s),h=se(p.stackedOnCurrent,n,o,s),f=se(p.next,n,o,s),g=se(p.stackedOnNext,n,o,s)),ae(d,f)>3e3||u&&ae(h,g)>3e3)return l.stopAnimation(),l.setShape({points:f}),void(u&&(u.stopAnimation(),u.setShape({points:f,stackedOnPoints:g})));l.shape.__points=p.current,l.shape.points=d;var m={shape:{points:f}};p.current!==d&&(m.shape.__points=p.next),l.stopAnimation(),r(l,m,c),u&&(u.setShape({points:d,stackedOnPoints:h}),u.stopAnimation(),r(u,{shape:{stackedOnPoints:g}},c),l.shape.points!==u.shape.points&&(u.shape.points=l.shape.points));for(var v=[],y=p.status,x=0;x<y.length;x++){if("="===y[x].cmd){var b=t.getItemGraphicEl(y[x].idx1);b&&v.push({el:b,ptIdx:x})}}l.animators&&l.animators.length&&l.animators[0].during((function(){u&&u.dirtyShape();for(var t=l.shape.__points,e=0;e<v.length;e++){var n=v[e].el,i=2*v[e].ptIdx;n.x=t[i],n.y=t[i+1],n.markRedraw()}}))},i.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},i.type="line",i}(P);function fe(t){var e;t.registerChartView(he),t.registerSeriesModel(Zt),t.registerLayout((e=!0,{seriesType:"line",plan:W(),reset:function(t){var n=t.getData(),i=t.coordinateSystem,o=t.pipelineContext,a=e||o.large;if(i){var r=b(i.dimensions,(function(t){return n.mapDimension(t)})).slice(0,2),s=r.length,l=n.getCalculationInfo("stackResultDimension");_(n,r[0])&&(r[0]=l),_(n,r[1])&&(r[1]=l);var u=n.getStore(),c=n.getDimensionIndex(r[0]),p=n.getDimensionIndex(r[1]);return s&&{progress:function(t,e){for(var n=t.end-t.start,o=a&&M(n*s),r=[],l=[],d=t.start,h=0;d<t.end;d++){var f=void 0;if(1===s){var g=u.get(c,d);f=i.dataToPoint(g,null,l)}else r[0]=u.get(c,d),r[1]=u.get(p,d),f=i.dataToPoint(r,null,l);a?(o[h++]=f[0],o[h++]=f[1]):e.setItemLayout(d,f.slice())}a&&e.setLayout("points",o)}}}}})),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,zt("line"))}var ge="\0_ec_interaction_mutex";function me(t){return t[ge]||(t[ge]={})}H({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Y);var ve={axisPointer:1,tooltip:1,brush:1};function ye(t,e,n,i,o,a){t=t||0;var r=n[1]-n[0];if(null!=o&&(o=be(o,[0,r])),null!=a&&(a=Math.max(a,null!=o?o:0)),"all"===i){var s=Math.abs(e[1]-e[0]);s=be(s,[0,r]),o=a=be(s,[o,a]),i=0}e[0]=be(e[0],n),e[1]=be(e[1],n);var l=xe(e,i);e[i]+=t;var u,c=o||0,p=n.slice();return l.sign<0?p[0]+=c:p[1]-=c,e[i]=be(e[i],p),u=xe(e,i),null!=o&&(u.sign!==l.sign||u.span<o)&&(e[1-i]=e[i]+l.sign*o),u=xe(e,i),null!=a&&u.span>a&&(e[1-i]=e[i]+u.sign*a),e}function xe(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function be(t,e){return Math.min(null!=e[1]?e[1]:Infinity,Math.max(null!=e[0]?e[0]:-Infinity,t))}var _e=!0,Se=Math.min,Me=Math.max,Ae=Math.pow,we=1e4,Ce=6,Ie=6,Te="globalPan",Oe={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},ke={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},De={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},Pe=0,Le=function(n){function i(t){var i=n.call(this)||this;return i._track=[],i._covers=[],i._handlers={},i._zr=t,i.group=new e,i._uid="brushController_"+Pe++,V(sn,(function(t,e){this._handlers[e]=X(t,this)}),i),i}return t(i,n),i.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},i.prototype._doEnableBrush=function(t){var e=this._zr;this._enableGlobalPan||function(t,e,n){me(t)[e]=n}(e,Te,this._uid),V(this._handlers,(function(t,n){e.on(n,t)})),this._brushType=t.brushType,this._brushOption=F(U(De),t,!0)},i.prototype._doDisableBrush=function(){var t=this._zr;!function(t,e,n){var i=me(t);i[e]===n&&(i[e]=null)}(t,Te,this._uid),V(this._handlers,(function(e,n){t.off(n,e)})),this._brushType=this._brushOption=null},i.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};V(t,(function(t){e[t.panelId]=U(t)}))}else this._panels=null;return this},i.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},i.prototype.updateCovers=function(t){t=b(t,(function(t){return F(U(De),t,!0)}));var e="\0-brush-index-",n=this._covers,i=this._covers=[],o=this,a=this._creatingCover;return new j(n,t,(function(t,e){return r(t.__brushOption,e)}),r).add(s).update(s).remove((function(t){n[t]!==a&&o.group.remove(n[t])})).execute(),this;function r(t,n){return(null!=t.id?t.id:e+n)+"-"+t.brushType}function s(e,r){var s=t[e];if(null!=r&&n[r]===a)i[e]=n[r];else{var l=i[e]=null!=r?(n[r].__brushOption=s,n[r]):Re(o,Ne(o,s));Ve(o,l)}}},i.prototype.unmount=function(){return this.enableBrush(!1),We(this),this._zr.remove(this.group),this},i.prototype.dispose=function(){this.unmount(),this.off()},i}(q);function Ne(t,e){var n=un[e.brushType].createCover(t,e);return n.__brushOption=e,ze(n,e),t.group.add(n),n}function Re(t,e){var n=Be(e);return n.endCreating&&(n.endCreating(t,e),ze(e,e.__brushOption)),e}function Ee(t,e){var n=e.__brushOption;Be(e).updateCoverShape(t,e,n.range,n)}function ze(t,e){var n=e.z;null==n&&(n=we),t.traverse((function(t){t.z=n,t.z2=n}))}function Ve(t,e){Be(e).updateCommon(t,e),Ee(t,e)}function Be(t){return un[t.__brushOption.brushType]}function Ze(t,e,n){var i,o=t._panels;if(!o)return _e;var a=t._transform;return V(o,(function(t){t.isTargetByCursor(e,n,a)&&(i=t)})),i}function Ge(t,e){var n=t._panels;if(!n)return _e;var i=e.__brushOption.panelId;return null!=i?n[i]:_e}function We(t){var e=t._covers,n=e.length;return V(e,(function(e){t.group.remove(e)}),t),e.length=0,!!n}function He(t,e){var n=b(t._covers,(function(t){var e=t.__brushOption,n=U(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}}));t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Ye(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Xe(t,n,i,o){var a=new e;return a.add(new Q({name:"main",style:qe(i),silent:!0,draggable:!0,cursor:"move",drift:K(Ke,t,n,a,["n","s","w","e"]),ondragend:K(He,n,{isEnd:!0})})),V(o,(function(e){a.add(new Q({name:e.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:K(Ke,t,n,a,e),ondragend:K(He,n,{isEnd:!0})}))})),a}function Fe(t,e,n,i){var o=i.brushStyle.lineWidth||0,a=Me(o,Ie),r=n[0][0],s=n[1][0],l=r-o/2,u=s-o/2,c=n[0][1],p=n[1][1],d=c-a+o/2,h=p-a+o/2,f=c-r,g=p-s,m=f+o,v=g+o;je(t,e,"main",r,s,f,g),i.transformable&&(je(t,e,"w",l,u,a,v),je(t,e,"e",d,u,a,v),je(t,e,"n",l,u,m,a),je(t,e,"s",l,h,m,a),je(t,e,"nw",l,u,a,a),je(t,e,"ne",d,u,a,a),je(t,e,"sw",l,h,a,a),je(t,e,"se",d,h,a,a))}function Ue(t,e){var n=e.__brushOption,i=n.transformable,o=e.childAt(0);o.useStyle(qe(n)),o.attr({silent:!i,cursor:i?"move":"default"}),V([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var o=e.childOfName(n.join("")),a=1===n.length?Je(t,n[0]):function(t,e){var n=[Je(t,e[0]),Je(t,e[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(t,n);o&&o.attr({silent:!i,invisible:!i,cursor:i?ke[a]+"-resize":null})}))}function je(t,e,n,i,o,a,r){var s,l,u,c,p,d=e.childOfName(n);d&&d.setShape((s=en(t,e,[[i,o],[i+a,o+r]]),l=Se(s[0][0],s[1][0]),u=Se(s[0][1],s[1][1]),c=Me(s[0][0],s[1][0]),p=Me(s[0][1],s[1][1]),{x:l,y:u,width:c-l,height:p-u}))}function qe(t){return O({strokeNoScale:!0},t.brushStyle)}function $e(t,e,n,i){var o=[Se(t,n),Se(e,i)],a=[Me(t,n),Me(e,i)];return[[o[0],a[0]],[o[1],a[1]]]}function Je(t,e){var n=tt({w:"left",e:"right",n:"top",s:"bottom"}[e],function(t){return et(t.group)}(t));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function Ke(t,e,n,i,o,a){var r=n.__brushOption,s=t.toRectRange(r.range),l=tn(e,o,a);V(i,(function(t){var e=Oe[t];s[e[0]][e[1]]+=l[e[0]]})),r.range=t.fromRectRange($e(s[0][0],s[1][0],s[0][1],s[1][1])),Ve(e,n),He(e,{isEnd:!1})}function Qe(t,e,n,i){var o=e.__brushOption.range,a=tn(t,n,i);V(o,(function(t){t[0]+=a[0],t[1]+=a[1]})),Ve(t,e),He(t,{isEnd:!1})}function tn(t,e,n){var i=t.group,o=i.transformCoordToLocal(e,n),a=i.transformCoordToLocal(0,0);return[o[0]-a[0],o[1]-a[1]]}function en(t,e,n){var i=Ge(t,e);return i&&i!==_e?i.clipPath(n,t._transform):U(n)}function nn(t){var e=t.event;e.preventDefault&&e.preventDefault()}function on(t,e,n){return t.childOfName("main").contain(e,n)}function an(t,e,n,i){var o,a=t._creatingCover,r=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],o=n[0]-i[0],a=n[1]-i[1];return Ae(o*o+a*a,.5)>Ce}(t)||a){if(r&&!a){"single"===s.brushMode&&We(t);var l=U(s);l.brushType=rn(l.brushType,r),l.panelId=r===_e?null:r.panelId,a=t._creatingCover=Ne(t,l),t._covers.push(a)}if(a){var u=un[rn(t._brushType,r)];a.__brushOption.range=u.getCreatingRange(en(t,a,t._track)),i&&(Re(t,a),u.updateCommon(t,a)),Ee(t,a),o={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&Ze(t,e,n)&&We(t)&&(o={isEnd:i,removeOnClick:!0});return o}function rn(t,e){return"auto"===t?e.defaultBrushType:t}var sn={mousedown:function(t){if(this._dragging)ln(this,t);else if(!t.target||!t.target.draggable){nn(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=Ze(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,i=this.group.transformCoordToLocal(e,n);if(function(t,e,n){if(t._brushType&&!function(t,e,n){var i=t._zr;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}(t,e.offsetX,e.offsetY)){var i=t._zr,o=t._covers,a=Ze(t,e,n);if(!t._dragging)for(var r=0;r<o.length;r++){var s=o[r].__brushOption;if(a&&(a===_e||s.panelId===a.panelId)&&un[s.brushType].contain(o[r],n[0],n[1]))return}a&&i.setCursorStyle("crosshair")}}(this,t,i),this._dragging){nn(t);var o=an(this,t,i,!1);o&&He(this,o)}},mouseup:function(t){ln(this,t)}};function ln(t,e){if(t._dragging){nn(e);var n=e.offsetX,i=e.offsetY,o=t.group.transformCoordToLocal(n,i),a=an(t,e,o,!0);t._dragging=!1,t._track=[],t._creatingCover=null,a&&He(t,a)}}var un={lineX:cn(0),lineY:cn(1),rect:{createCover:function(t,e){function n(t){return t}return Xe({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=Ye(t);return $e(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){Fe(t,e,n,i)},updateCommon:Ue,contain:on},polygon:{createCover:function(t,n){var i=new e;return i.add(new $({name:"main",style:qe(n),silent:!0})),i},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new J({name:"main",draggable:!0,drift:K(Qe,t,e),ondragend:K(He,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:en(t,e,n)})},updateCommon:Ue,contain:on}};function cn(t){return{createCover:function(e,n){return Xe({toRectRange:function(e){var n=[e,[0,100]];return t&&n.reverse(),n},fromRectRange:function(e){return e[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=Ye(e);return[Se(n[0][t],n[1][t]),Me(n[0][t],n[1][t])]},updateCoverShape:function(e,n,i,o){var a,r=Ge(e,n);if(r!==_e&&r.getLinearBrushOtherExtent)a=r.getLinearBrushOtherExtent(t);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,a];t&&l.reverse(),Fe(e,n,l,o)},updateCommon:Ue,contain:on}}const pn=Le;function dn(t){return t=gn(t),function(e){return nt(e,t)}}function hn(t,e){return t=gn(t),function(n){var i=null!=e?e:n,o=i?t.width:t.height,a=i?t.x:t.y;return[a,a+(o||0)]}}function fn(t,e,n){var i=gn(t);return function(t,o){return i.contain(o[0],o[1])&&!function(t,e,n){var i=e.getComponentByElement(t.topTarget),o=i&&i.coordinateSystem;return i&&i!==n&&!ve.hasOwnProperty(i.mainType)&&o&&o.model!==n}(t,e,n)}}function gn(t){return it.create(t)}var mn=["x","y","radius","angle","single"],vn=["cartesian2d","polar","singleAxis"];function yn(t){return t+"Axis"}function xn(t,e){var n,i=ot(),o=[],a=ot();t.eachComponent({mainType:"dataZoom",query:e},(function(t){a.get(t.uid)||s(t)}));do{n=!1,t.eachComponent("dataZoom",r)}while(n);function r(t){!a.get(t.uid)&&function(t){var e=!1;return t.eachTargetAxis((function(t,n){var o=i.get(t);o&&o[n]&&(e=!0)})),e}(t)&&(s(t),n=!0)}function s(t){a.set(t.uid,!0),o.push(t),t.eachTargetAxis((function(t,e){(i.get(t)||i.set(t,[]))[e]=!0}))}return o}var bn=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}();function _n(t){var e={};return V(["start","end","startValue","endValue","throttle"],(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}const Sn=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.type="dataZoom.select",n}(function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return t(n,e),n.prototype.init=function(t,e,n){var i=_n(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this._doInit(i)},n.prototype.mergeOption=function(t){var e=_n(t);F(this.option,t,!0),F(this.settledOption,e,!0),this._doInit(e)},n.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;V([["start","startValue"],["end","endValue"]],(function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=n[t[0]]=null)}),this),this._resetTarget()},n.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=ot();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each((function(t){t.indexList.length&&(this._noTarget=!1)}),this)},n.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return V(mn,(function(n){var i=this.getReferringComponents(yn(n),rt);if(i.specified){e=!0;var o=new bn;V(i.models,(function(t){o.add(t.componentIndex)})),t.set(n,o)}}),this),e},n.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,i=!0;if(i){var o="vertical"===e?"y":"x";a(n.findComponents({mainType:o+"Axis"}),o)}i&&a(n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}}),"single");function a(e,n){var o=e[0];if(o){var a=new bn;if(a.add(o.componentIndex),t.set(n,a),i=!1,"x"===n||"y"===n){var r=o.getReferringComponents("grid",st).models[0];r&&V(e,(function(t){o.componentIndex!==t.componentIndex&&r===t.getReferringComponents("grid",st).models[0]&&a.add(t.componentIndex)}))}}}i&&V(mn,(function(e){if(i){var o=n.findComponents({mainType:yn(e),filter:function(t){return"category"===t.get("type",!0)}});if(o[0]){var a=new bn;a.add(o[0].componentIndex),t.set(e,a),i=!1}}}),this)},n.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis((function(e){!t&&(t=e)}),this),"y"===t?"vertical":"horizontal"},n.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},n.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");V([["start","startValue"],["end","endValue"]],(function(i,o){var a=null!=t[i[0]],r=null!=t[i[1]];a&&!r?e[o]="percent":!a&&r?e[o]="value":n?e[o]=n[o]:a&&(e[o]="percent")}))},n.prototype.noTarget=function(){return this._noTarget},n.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis((function(e,n){null==t&&(t=this.ecModel.getComponent(yn(e),n))}),this),t},n.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each((function(n,i){V(n.indexList,(function(n){t.call(e,i,n)}))}))},n.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},n.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(yn(t),e)},n.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;V([["start","startValue"],["end","endValue"]],(function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])}),this),this._updateRangeUse(t)},n.prototype.setCalculatedRange=function(t){var e=this.option;V(["start","startValue","end","endValue"],(function(n){e[n]=t[n]}))},n.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},n.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},n.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var o=n[i],a=this._targetAxisInfoMap.get(o),r=0;r<a.indexList.length;r++){var s=this.getAxisProxy(o,a.indexList[r]);if(s.hostedBy(this))return s;e||(e=s)}return e},n.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},n.prototype.getOrient=function(){return this._orient},n.type="dataZoom",n.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],n.defaultOption={z:4,filterMode:"filter",start:0,end:100},n}(lt));const Mn=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.type="dataZoom.select",n}(function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.prototype.render=function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},n.type="dataZoom",n}(ut));var An=V,wn=ft,Cn=function(){function t(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries((function(e){if(function(t){var e=t.get("coordinateSystem");return at(vn,e)>=0}(e)){var n=yn(this._dimName),i=e.getReferringComponents(n,st).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}}),this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return U(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,i=this.getAxisModel().axis.scale,o=this._dataZoomModel.getRangePropMode(),a=[0,100],r=[],s=[];An(["start","end"],(function(l,u){var c=t[l],p=t[l+"Value"];"percent"===o[u]?(null==c&&(c=a[u]),p=i.parse(ct(c,a,n))):(e=!0,p=null==p?n[u]:i.parse(p),c=ct(p,n,a)),s[u]=null==p||isNaN(p)?n[u]:p,r[u]=null==c||isNaN(c)?a[u]:c})),wn(s),wn(r);var l=this._minMaxSpan;function u(t,e,n,o,a){var r=a?"Span":"ValueSpan";ye(0,t,n,"all",l["min"+r],l["max"+r]);for(var s=0;s<2;s++)e[s]=ct(t[s],n,o,!0),a&&(e[s]=i.parse(e[s]))}return e?u(s,r,n,a,!1):u(r,s,a,n,!0),{valueWindow:s,percentWindow:r}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var i=[Infinity,-Infinity];An(n,(function(t){dt(i,t.getData(),e)}));var o=t.getAxisModel(),a=ht(o.axis.scale,o,i).calculate();return[a.min,a.max]}(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),o=t.get("filterMode"),a=this._valueWindow;"none"!==o&&An(i,(function(t){var e=t.getData(),i=e.mapDimensionsAll(n);if(i.length){if("weakFilter"===o){var r=e.getStore(),s=b(i,(function(t){return e.getDimensionIndex(t)}),e);e.filterSelf((function(t){for(var e,n,o,l=0;l<i.length;l++){var u=r.get(s[l],t),c=!isNaN(u),p=u<a[0],d=u>a[1];if(c&&!p&&!d)return!0;c&&(o=!0),p&&(e=!0),d&&(n=!0)}return o&&e&&n}))}else An(i,(function(n){if("empty"===o)t.setData(e=e.map(n,(function(t){return function(t){return t>=a[0]&&t<=a[1]}(t)?t:NaN})));else{var i={};i[n]=a,e.selectRange(i)}}));An(i,(function(t){e.setApproximateExtent(a,t)}))}}))}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;An(["min","max"],(function(i){var o=e.get(i+"Span"),a=e.get(i+"ValueSpan");null!=a&&(a=this.getAxisModel().axis.scale.parse(a)),null!=a?o=ct(n[0]+a,n,[0,100],!0):null!=o&&(a=ct(o,[0,100],n,!0)-n[0]),t[i+"Span"]=o,t[i+"ValueSpan"]=a}),this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var i=pt(n,[0,500]);i=Math.min(i,20);var o=t.axis.scale.rawExtentInfo;0!==e[0]&&o.setDeterminedMinMax("min",+n[0].toFixed(i)),100!==e[1]&&o.setDeterminedMinMax("max",+n[1].toFixed(i)),o.freeze()}},t}();const In={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(i,o){var a=t.getComponent(yn(i),o);e(i,o,a,n)}))}))}e((function(t,e,n,i){n.__dzAxisProxy=null}));var n=[];e((function(e,i,o,a){o.__dzAxisProxy||(o.__dzAxisProxy=new Cn(e,i,a,t),n.push(o.__dzAxisProxy))}));var i=ot();return V(n,(function(t){V(t.getTargetSeriesModels(),(function(t){i.set(t.uid,t)}))})),i},overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(e,n){t.getAxisProxy(e,n).reset(t)})),t.eachTargetAxis((function(n,i){t.getAxisProxy(n,i).filterData(t,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}}))}};var Tn=!1;function On(t){Tn||(Tn=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,In),function(t){t.registerAction("dataZoom",(function(t,e){var n=xn(e,t);V(n,(function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}))}(t),t.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function kn(t){t.registerComponentModel(Sn),t.registerComponentView(Mn),On(t)}var Dn=function(){return function(){}}(),Pn={};function Ln(t,e){Pn[t]=e}function Nn(t){return Pn[t]}const Rn=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;V(this.option.feature,(function(e,n){var i=Nn(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(t)),F(e,i.defaultOption))}))},n.type="toolbox",n.layoutMode={type:"box",ignoreSize:!0},n.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},n}(lt);const En=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.render=function(t,e,n,i){var r=this.group;if(r.removeAll(),t.get("show")){var s=+t.get("itemSize"),l="vertical"===t.get("orient"),u=t.get("feature")||{},c=this._features||(this._features={}),p=[];V(u,(function(t,e){p.push(e)})),new j(this._featureNames||[],p).add(d).update(d).remove(K(d,null)).execute(),this._featureNames=p,Vt(r,t,n),r.add(Bt(r.getBoundingRect(),t)),l||r.eachChild((function(t){var e=t.__title,i=t.ensureState("emphasis"),o=i.textConfig||(i.textConfig={}),a=t.getTextContent(),l=a&&a.ensureState("emphasis");if(l&&!N(l)&&e){var u=l.style||(l.style={}),c=bt(e,R.makeFont(u)),p=t.x+r.x,d=!1;t.y+r.y+s+c.height>n.getHeight()&&(o.position="top",d=!0);var h=d?-5-c.height:s+10;p+c.width/2>n.getWidth()?(o.position=["100%",h],u.align="right"):p-c.width/2<0&&(o.position=[0,h],u.align="left")}}))}function d(d,h){var f,g=p[d],m=p[h],v=u[g],y=new gt(v,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===g&&(v.title=i.newTitle),g&&!m){if(function(t){return 0===t.indexOf("my")}(g))f={onclick:y.option.onclick,featureName:g};else{var x=Nn(g);if(!x)return;f=new x}c[g]=f}else if(!(f=c[m]))return;f.uid=mt("toolbox-feature"),f.model=y,f.ecModel=e,f.api=n;var b=f instanceof Dn;g||!m?!y.get("show")||b&&f.unusable?b&&f.remove&&f.remove(e,n):(!function(i,u,c){var p,d,h=i.getModel("iconStyle"),f=i.getModel(["emphasis","iconStyle"]),g=u instanceof Dn&&u.getIcons?u.getIcons():i.get("icon"),m=i.get("title")||{};vt(g)?(p={})[c]=g:p=g;vt(m)?(d={})[c]=m:d=m;var v=i.iconPaths={};V(p,(function(c,p){var g=yt(c,{},{x:-s/2,y:-s/2,width:s,height:s});g.setStyle(h.getItemStyle()),g.ensureState("emphasis").style=f.getItemStyle();var m=new R({style:{text:d[p],align:f.get("textAlign"),borderRadius:f.get("textBorderRadius"),padding:f.get("textPadding"),fill:null},ignore:!0});g.setTextContent(m),xt({el:g,componentModel:t,itemName:p,formatterParamsExtra:{title:d[p]}}),g.__title=d[p],g.on("mouseover",(function(){var e=f.getItemStyle(),i=l?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";m.setStyle({fill:f.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:f.get("textBackgroundColor")}),g.setTextConfig({position:f.get("textPosition")||i}),m.ignore=!t.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==i.get(["iconStatus",p])&&n.leaveEmphasis(this),m.hide()})),("emphasis"===i.get(["iconStatus",p])?o:a)(g),r.add(g),g.on("click",X(u.onclick,u,e,n,p)),v[p]=g}))}(y,f,g),y.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&("emphasis"===e?o:a)(i[t])},f instanceof Dn&&f.render&&f.render(y,e,n,i)):b&&f.dispose&&f.dispose(e,n)}},n.prototype.updateView=function(t,e,n,i){V(this._features,(function(t){t instanceof Dn&&t.updateView&&t.updateView(t.model,e,n,i)}))},n.prototype.remove=function(t,e){V(this._features,(function(n){n instanceof Dn&&n.remove&&n.remove(t,e)})),this.group.removeAll()},n.prototype.dispose=function(t,e){V(this._features,(function(n){n instanceof Dn&&n.dispose&&n.dispose(t,e)}))},n.type="toolbox",n}(ut);const zn=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",o="svg"===e.getZr().painter.getType(),a=o?"svg":n.get("type",!0)||"png",r=e.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=_t.browser;if(N(MouseEvent)&&(s.newEdge||!s.ie&&!s.edge)){var l=document.createElement("a");l.download=i+"."+a,l.target="_blank",l.href=r;var u=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});l.dispatchEvent(u)}else if(window.navigator.msSaveOrOpenBlob||o){var c=r.split(","),p=c[0].indexOf("base64")>-1,d=o?decodeURIComponent(c[1]):c[1];p&&(d=window.atob(d));var h=i+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var f=d.length,g=new Uint8Array(f);f--;)g[f]=d.charCodeAt(f);var m=new Blob([g]);window.navigator.msSaveOrOpenBlob(m,h)}else{var v=document.createElement("iframe");document.body.appendChild(v);var y=v.contentWindow,x=y.document;x.open("image/svg+xml","replace"),x.write(d),x.close(),y.focus(),x.execCommand("SaveAs",!0,h),document.body.removeChild(v)}}else{var b=n.get("lang"),_='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(b&&b[0]||"")+'" /></body>',S=window.open();S.document.write(_),S.document.title=i}},n.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},n}(Dn);var Vn="__ec_magicType_stack__",Bn=[["line","bar"],["stack"]],Zn=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return V(t.get("type"),(function(t){e[t]&&(n[t]=e[t])})),n},n.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},n.prototype.onclick=function(t,e,n){var i=this.model,o=i.get(["seriesIndex",n]);if(Gn[n]){var a,r={series:[]};V(Bn,(function(t){at(t,n)>=0&&V(t,(function(t){i.setIconStatus(t,"normal")}))})),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==o?null:{seriesIndex:o}},(function(t){var e=t.subType,o=t.id,a=Gn[n](e,o,t,i);a&&(O(a,t.option),r.series.push(a));var s=t.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var l=s.getAxesByScale("ordinal")[0];if(l){var u=l.dim+"Axis",c=t.getReferringComponents(u,st).models[0].componentIndex;r[u]=r[u]||[];for(var p=0;p<=c;p++)r[u][c]=r[u][c]||{};r[u][c].boundaryGap="bar"===n}}}));var s=n;"stack"===n&&(a=F({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",n])&&(s="tiled")),e.dispatchAction({type:"changeMagicType",currentType:s,newOption:r,newTitle:a,featureName:"magicType"})}},n}(Dn),Gn={line:function(t,e,n,i){if("bar"===t)return F({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(t,e,n,i){if("line"===t)return F({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(t,e,n,i){var o=n.get("stack")===Vn;if("line"===t||"bar"===t)return i.setIconStatus("stack",o?"normal":"emphasis"),F({id:e,stack:o?"":Vn},i.get(["option","stack"])||{},!0)}};H({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(t,e){e.mergeOption(t.newOption)}));const Wn=Zn;var Hn=new Array(60).join("-"),Yn="\t";function Xn(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var Fn=new RegExp("["+Yn+"]+","g");function Un(t,e){var n=t.split(new RegExp("\n*"+Hn+"\n*","g")),i={series:[]};return V(n,(function(t,n){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf(Yn)>=0)return!0}(t)){var o=function(t){for(var e=t.split(/\n+/g),n=Xn(e.shift()).split(Fn),i=[],o=b(n,(function(t){return{name:t,data:[]}})),a=0;a<e.length;a++){var r=Xn(e[a]).split(Fn);i.push(r.shift());for(var s=0;s<r.length;s++)o[s]&&(o[s].data[a]=r[s])}return{series:o,categories:i}}(t),a=e[n],r=a.axisDim+"Axis";a&&(i[r]=i[r]||[],i[r][a.axisIndex]={data:o.categories},i.series=i.series.concat(o.series))}else{o=function(t){for(var e=t.split(/\n+/g),n=Xn(e.shift()),i=[],o=0;o<e.length;o++){var a=Xn(e[o]);if(a){var r=a.split(Fn),s="",l=void 0,u=!1;isNaN(r[0])?(u=!0,s=r[0],r=r.slice(1),i[o]={name:s,value:[]},l=i[o].value):l=i[o]=[];for(var c=0;c<r.length;c++)l.push(+r[c]);1===l.length&&(u?i[o].value=l[0]:i[o]=l[0])}}return{name:n,data:i}}(t);i.series.push(o)}})),i}var jn=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.onclick=function(t,e){setTimeout((function(){e.dispatchAction({type:"hideTip"})}));var n=e.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",o.style.backgroundColor=i.get("backgroundColor")||"#fff";var a=document.createElement("h4"),r=i.get("lang")||[];a.innerHTML=r[0]||i.get("title"),a.style.cssText="margin:10px 20px",a.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="overflow:auto";var u=i.get("optionToContent"),c=i.get("contentToOption"),p=function(t){var e,n,i,o=function(t){var e={},n=[],i=[];return t.eachRawSeries((function(t){var o=t.coordinateSystem;if(!o||"cartesian2d"!==o.type&&"polar"!==o.type)n.push(t);else{var a=o.getBaseAxis();if("category"===a.type){var r=a.dim+"_"+a.index;e[r]||(e[r]={categoryAxis:a,valueAxis:o.getOtherAxis(a),series:[]},i.push({axisDim:a.dim,axisIndex:a.index})),e[r].series.push(t)}else n.push(t)}})),{seriesGroupByCategoryAxis:e,other:n,meta:i}}(t);return{value:At([(n=o.seriesGroupByCategoryAxis,i=[],V(n,(function(t,e){var n=t.categoryAxis,o=t.valueAxis.dim,a=[" "].concat(b(t.series,(function(t){return t.name}))),r=[n.model.getCategories()];V(t.series,(function(t){var e=t.getRawData();r.push(t.getRawData().mapArray(e.mapDimension(o),(function(t){return t})))}));for(var s=[a.join(Yn)],l=0;l<r[0].length;l++){for(var u=[],c=0;c<r.length;c++)u.push(r[c][l]);s.push(u.join(Yn))}i.push(s.join("\n"))})),i.join("\n\n"+Hn+"\n\n")),(e=o.other,b(e,(function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,(function(){for(var t=arguments.length,o=arguments[t-1],a=e.getName(o),r=0;r<t-1;r++)i[r]=arguments[r];n.push((a?a+Yn:"")+i.join(Yn))})),n.join("\n")})).join("\n\n"+Hn+"\n\n"))],(function(t){return!!t.replace(/[\n\t\s]/g,"")})).join("\n\n"+Hn+"\n\n"),meta:o.meta}}(t);if(N(u)){var d=u(e.getOption());vt(d)?s.innerHTML=d:St(d)&&s.appendChild(d)}else{l.readOnly=i.get("readOnly");var h=l.style;h.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",h.color=i.get("textColor"),h.borderColor=i.get("textareaBorderColor"),h.backgroundColor=i.get("textareaColor"),l.value=p.value,s.appendChild(l)}var f=p.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),y=document.createElement("div");m+=";background-color:"+i.get("buttonColor"),m+=";color:"+i.get("buttonTextColor");var x=this;function _(){n.removeChild(o),x._dom=null}Mt(v,"click",_),Mt(y,"click",(function(){if(null==c&&null!=u||null!=c&&null==u)_();else{var t;try{t=N(c)?c(s,e.getOption()):Un(l.value,f)}catch(n){throw _(),new Error("Data view format error "+n)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),_()}})),v.innerHTML=r[1],y.innerHTML=r[2],y.style.cssText=v.style.cssText=m,!i.get("readOnly")&&g.appendChild(y),g.appendChild(v),o.appendChild(a),o.appendChild(s),o.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(o),this._dom=o},n.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},n.prototype.dispose=function(t,e){this.remove(t,e)},n.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},n}(Dn);function qn(t,e){return b(t,(function(t,n){var i=e&&e[n];if(x(i)&&!wt(i)){x(t)&&!wt(t)||(t={value:t});var o=null!=i.name&&null==t.name;return t=O(t,i),o&&delete t.name,t}return t}))}H({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(t,e){var n=[];V(t.newOption.series,(function(t){var i=e.getSeriesByName(t.name)[0];if(i){var o=i.get("data");n.push({name:t.name,data:qn(t.data,o)})}else n.push(d({type:"scatter"},t))})),e.mergeOption(O({series:n},t.newOption))}));const $n=jn;var Jn=V,Kn=Ct();function Qn(t){var e=Kn(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var ti=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.onclick=function(t,e){!function(t){Kn(t).snapshots=null}(t),e.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},n}(Dn);H({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(t,e){e.resetOption("recreate")}));const ei=ti;var ni=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],ii=function(){function t(t,e,n){var i=this;this._targetInfoList=[];var o=ai(e,t);V(ri,(function(t,e){(!n||!n.include||at(n.include,e)>=0)&&t(o,i._targetInfoList)}))}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,(function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=ui[t.brushType](0,n,e);t.__rangeOffset={offset:pi[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})),t},t.prototype.matchOutputRanges=function(t,e,n){V(t,(function(t){var i=this.findTargetInfo(t,e);i&&!0!==i&&V(i.coordSyses,(function(i){var o=ui[t.brushType](1,i,t.range,!0);n(t,o.values,i,e)}))}),this)},t.prototype.setInputRanges=function(t,e){V(t,(function(t){var n,i,o,a,r,s=this.findTargetInfo(t,e);if(t.range=t.range||[],s&&!0!==s){t.panelId=s.panelId;var l=ui[t.brushType](0,s.coordSys,t.coordRange),u=t.__rangeOffset;t.range=u?pi[t.brushType](l.values,u.offset,(n=l.xyMinMax,i=u.xyMinMax,o=hi(n),a=hi(i),r=[o[0]/a[0],o[1]/a[1]],isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r)):l.values}}),this)},t.prototype.makePanelOpts=function(t,e){return b(this._targetInfoList,(function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:dn(i),isTargetByCursor:fn(i,t,n.coordSysModel),getLinearBrushOtherExtent:hn(i)}}))},t.prototype.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&at(i.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=ai(e,t),o=0;o<n.length;o++){var a=n[o],r=t.panelId;if(r){if(a.panelId===r)return a}else for(var s=0;s<si.length;s++)if(si[s](i,a))return a}return!0},t}();function oi(t){return t[0]>t[1]&&t.reverse(),t}function ai(t,e){return It(t,e,{includeMainTypes:ni})}var ri={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,o=t.gridModels,a=ot(),r={},s={};(n||i||o)&&(V(n,(function(t){var e=t.axis.grid.model;a.set(e.id,e),r[e.id]=!0})),V(i,(function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0})),V(o,(function(t){a.set(t.id,t),r[t.id]=!0,s[t.id]=!0})),a.each((function(t){var o=t.coordinateSystem,a=[];V(o.getCartesians(),(function(t,e){(at(n,t.getAxis("x").model)>=0||at(i,t.getAxis("y").model)>=0)&&a.push(t)})),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:a[0],coordSyses:a,getPanelRect:li.grid,xAxisDeclared:r[t.id],yAxisDeclared:s[t.id]})})))},geo:function(t,e){V(t.geoModels,(function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:li.geo})}))}},si=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,o=t.gridModel;return!o&&n&&(o=n.axis.grid.model),!o&&i&&(o=i.axis.grid.model),o&&o===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],li={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(et(t)),e}},ui={lineX:K(ci,0),lineY:K(ci,1),rect:function(t,e,n,i){var o=t?e.pointToData([n[0][0],n[1][0]],i):e.dataToPoint([n[0][0],n[1][0]],i),a=t?e.pointToData([n[0][1],n[1][1]],i):e.dataToPoint([n[0][1],n[1][1]],i),r=[oi([o[0],a[0]]),oi([o[1],a[1]])];return{values:r,xyMinMax:r}},polygon:function(t,e,n,i){var o=[[Infinity,-Infinity],[Infinity,-Infinity]];return{values:b(n,(function(n){var a=t?e.pointToData(n,i):e.dataToPoint(n,i);return o[0][0]=Math.min(o[0][0],a[0]),o[1][0]=Math.min(o[1][0],a[1]),o[0][1]=Math.max(o[0][1],a[0]),o[1][1]=Math.max(o[1][1],a[1]),a})),xyMinMax:o}}};function ci(t,e,n,i){var o=n.getAxis(["x","y"][t]),a=oi(b([0,1],(function(t){return e?o.coordToData(o.toLocalCoord(i[t]),!0):o.toGlobalCoord(o.dataToCoord(i[t]))}))),r=[];return r[t]=a,r[1-t]=[NaN,NaN],{values:a,xyMinMax:r}}var pi={lineX:K(di,0),lineY:K(di,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return b(t,(function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]}))}};function di(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function hi(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}const fi=ii;var gi=V,mi=Ot("toolbox-dataZoom_"),vi=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.render=function(t,e,n,i){this._brushController||(this._brushController=new pn(n.getZr()),this._brushController.on("brush",X(this._onBrush,this)).mount()),function(t,e,n,i,o){var a=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(a="dataZoomSelect"===i.key&&i.dataZoomSelectActive);n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var r=new fi(xi(t),e,{include:["grid"]}),s=r.makePanelOpts(o,(function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!a||!s.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",function(t){return Qn(t).length}(e)>1?"emphasis":"normal")}(t,e)},n.prototype.onclick=function(t,e,n){yi[n].call(this)},n.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new fi(xi(this.model),i,{include:["grid"]}).matchOutputRanges(e,i,(function(t,e,n){if("cartesian2d"===n.type){var i=t.brushType;"rect"===i?(o("x",n,e[0]),o("y",n,e[1])):o({lineX:"x",lineY:"y"}[i],n,e)}})),function(t,e){var n=Qn(t);Jn(e,(function(e,i){for(var o=n.length-1;o>=0&&!n[o][i];o--);if(o<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(a){var r=a.getPercentRange();n[0][i]={dataZoomId:i,start:r[0],end:r[1]}}}})),n.push(e)}(i,n),this._dispatchZoomAction(n)}function o(t,e,o){var a=e.getAxis(t),r=a.model,s=function(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(t,e.componentIndex)&&(i=n)})),i}(t,r,i),l=s.findRepresentativeAxisProxy(r).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(o=ye(0,o.slice(),a.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:o[0],endValue:o[1]})}},n.prototype._dispatchZoomAction=function(t){var e=[];gi(t,(function(t,n){e.push(U(t))})),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},n.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},n}(Dn),yi={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(function(t){var e=Qn(t),n=e[e.length-1];e.length>1&&e.pop();var i={};return Jn(n,(function(t,n){for(var o=e.length-1;o>=0;o--)if(t=e[o][n]){i[n]=t;break}})),i}(this.ecModel))}};function xi(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}Tt("dataZoom",(function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(e&&null!=e.get(n)){var i=e.getModel(n),o=[],a=xi(i),r=It(t,a);return gi(r.xAxisModels,(function(t){return s(t,"xAxis","xAxisIndex")})),gi(r.yAxisModels,(function(t){return s(t,"yAxis","yAxisIndex")})),o}function s(t,e,n){var a=t.componentIndex,r={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:mi+e+a};r[n]=a,o.push(r)}}));const bi=vi;function _i(t){t.registerComponentModel(Rn),t.registerComponentView(En),Ln("saveAsImage",zn),Ln("magicType",Wn),Ln("dataView",$n),Ln("dataZoom",bi),Ln("restore",ei),kt(kn)}export{_i as a,fe as i};

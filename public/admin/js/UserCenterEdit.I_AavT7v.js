import{de as e,aa as a,df as l,aw as r,a as i,k as t,w as o,a2 as s,a1 as m,ax as d,ar as p}from"./index.DjA_re4j.js";import{E as n}from"./el-scrollbar.Cy-juajC.js";import{E as u}from"./el-row.BdhO5HhT.js";import{E as h}from"./el-col.Dga7oIhs.js";import{a as c,E as f}from"./el-form-item.hhV0qe52.js";import{_ as j}from"./FileImage.DDSFINET.js";import{s as g}from"./screen-height.Bl-ULtFD.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.DfHHGGLY.js";import"./_Uint8Array.CC4oM34b.js";import"./el-dialog.yRJSSox7.js";import"./refs.DNzTDZsJ.js";import"./isUndefined.DgmxjSXK.js";import"./el-text.w_ZtZ4uh.js";import"./el-avatar.D3u9l1HT.js";import"./el-image-viewer.fFYArL2i.js";import"./debounce.DrUEbGEy.js";import"./index.DhRVrygn.js";import"./index.De39iDjm.js";import"./el-loading.B5cNeiq8.js";import"./index.B7UuPqmC.js";import"./el-select._wYx6vZR.js";import"./el-popper.Cw-ytP0e.js";import"./index.DGtsW67O.js";import"./el-table-column.CECY1sm-.js";import"./flatten.BFq1XWQr.js";import"./el-checkbox.hOtSUKt2.js";import"./el-tooltip.l0sNRNKZ.js";import"./FilePreview.CALYRKwz.js";import"./clipboard.2ITcRTuu.js";/* empty css                          */import"./el-card.Ben1v_kl.js";import"./el-link.BPpHkZqa.js";import"./el-switch.DFvPhZwO.js";/* empty css                       */import"./el-date-picker.CMm1Jx1A.js";import"./permission.DAMaNzFl.js";import"./index.Cp1HnnF1.js";import"./group.DVFDmR6W.js";import"./tag.CbH6Oio-.js";import"./index.BYJdpcwz.js";import"./tagsView.DcdT0xLi.js";const b=_({name:"SystemUserCenterEdit",data:()=>({name:"修改信息",height:680,loading:!1,model:{avatar_id:0,avatar_url:"",username:"",nickname:"",phone:"",email:""},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],username:[{required:!0,message:"请输入账号",trigger:"blur"}]}}),created(){this.height=g(210),this.info()},methods:{info(l=!1){e().then((e=>{this.reset(e.data),this.update(e.data),l&&a.success(e.msg)})).catch((()=>{}))},refresh(){this.loading=!0,this.info(!0),this.loading=!1},submit(){this.$refs.ref.validate((e=>{e&&(this.loading=!0,l(this.model).then((e=>{this.update(this.model),this.loading=!1,a.success(e.msg)})).catch((()=>{this.loading=!1})))}))},update(e){const a=r();a.user.avatar_url=e.avatar_url,a.user.nickname=e.nickname,a.user.username=e.username},reset(e){if(this.model=e||this.$options.data().model,void 0!==this.$refs.ref)try{this.$refs.ref.resetFields(),this.$refs.ref.clearValidate()}catch(a){}}}},[["render",function(e,a,l,r,g,_){const b=j,k=c,v=d,V=p,x=f,w=h,U=u,y=n;return i(),t(y,{native:"",height:g.height},{default:o((()=>[s(U,null,{default:o((()=>[s(w,{span:12},{default:o((()=>[s(x,{ref:"ref",rules:g.rules,model:g.model,"label-width":"120px"},{default:o((()=>[s(k,{label:"头像",prop:"avatar_id"},{default:o((()=>[s(b,{modelValue:g.model.avatar_id,"onUpdate:modelValue":a[0]||(a[0]=e=>g.model.avatar_id=e),"file-url":g.model.avatar_url,"file-title":"上传头像","file-tip":"图片小于 100 KB，jpg、png格式，100 x 100",height:100,avatar:"",upload:""},null,8,["modelValue","file-url"])])),_:1}),s(k,{label:"昵称",prop:"nickname"},{default:o((()=>[s(v,{modelValue:g.model.nickname,"onUpdate:modelValue":a[1]||(a[1]=e=>g.model.nickname=e),placeholder:"请输入昵称",clearable:""},null,8,["modelValue"])])),_:1}),s(k,{label:"账号",prop:"username"},{default:o((()=>[s(v,{modelValue:g.model.username,"onUpdate:modelValue":a[2]||(a[2]=e=>g.model.username=e),placeholder:"请输入账号",clearable:""},null,8,["modelValue"])])),_:1}),s(k,{label:"手机",prop:"phone"},{default:o((()=>[s(v,{modelValue:g.model.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>g.model.phone=e),placeholder:"请输入手机",clearable:""},null,8,["modelValue"])])),_:1}),s(k,{label:"邮箱",prop:"email"},{default:o((()=>[s(v,{modelValue:g.model.email,"onUpdate:modelValue":a[4]||(a[4]=e=>g.model.email=e),placeholder:"请输入邮箱",clearable:""},null,8,["modelValue"])])),_:1}),s(k,null,{default:o((()=>[s(V,{loading:g.loading,onClick:_.refresh},{default:o((()=>[m("刷新")])),_:1},8,["loading","onClick"]),s(V,{loading:g.loading,type:"primary",onClick:_.submit},{default:o((()=>[m("提交")])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["rules","model"])])),_:1})])),_:1})])),_:1},8,["height"])}]]);export{b as default};

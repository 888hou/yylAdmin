import{ab as e,c as a,l,w as t,a3 as i,a2 as s,ay as o,as as m}from"./index.APvhMgDH.js";import{E as d}from"./el-row.CPP9k-Sk.js";import{a as r,E as n}from"./el-form-item.CRP52N48.js";import{E as p}from"./el-switch.Cb3IQwTC.js";import{E as u}from"./el-col.CfjMTi8p.js";import{s as _}from"./screen-height.C1I3e_dh.js";import{a as f,b as h}from"./setting.eMLKBDW6.js";import{_ as c}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.BGOR1owe.js";import"./_Uint8Array.Dyjbn1zu.js";import"./tagsView.CbCSAniL.js";const g=c({name:"MemberSettingApi",data:()=>({name:"接口设置",height:680,loading:!1,model:{is_member_api:0,api_rate_num:3,api_rate_time:1},rules:{}}),created(){this.height=_(210),this.info()},methods:{info(){f().then((e=>{this.model=e.data}))},refresh(){this.loading=!0,f().then((a=>{this.model=a.data,this.loading=!1,e.success(a.msg)})).catch((()=>{this.loading=!1}))},submit(){this.$refs.ref.validate((a=>{a&&(this.loading=!0,h(this.model).then((a=>{this.loading=!1,e.success(a.msg)})).catch((()=>{this.loading=!1})))}))}}},[["render",function(e,_,f,h,c,g){const b=o,j=u,V=r,y=p,v=m,w=n,x=d;return a(),l(x,null,{default:t((()=>[i(j,{span:16},{default:t((()=>[i(w,{ref:"ref",model:c.model,rules:c.rules,"label-width":"120px"},{default:t((()=>[i(V,{label:"接口速率"},{default:t((()=>[i(j,{span:5},{default:t((()=>[i(b,{modelValue:c.model.api_rate_num,"onUpdate:modelValue":_[0]||(_[0]=e=>c.model.api_rate_num=e),type:"number",placeholder:"次数"},{append:t((()=>[s("次 /")])),_:1},8,["modelValue"])])),_:1}),i(j,{span:5},{default:t((()=>[i(b,{modelValue:c.model.api_rate_time,"onUpdate:modelValue":_[1]||(_[1]=e=>c.model.api_rate_time=e),type:"number",placeholder:"时间"},{append:t((()=>[s("秒")])),_:1},8,["modelValue"])])),_:1}),i(j,{span:14},{default:t((()=>[s("eg：3/1：3次1秒；次数为 0 则不限制")])),_:1})])),_:1}),i(V,{label:"会员接口",prop:"is_member_api"},{default:t((()=>[i(j,{span:4},{default:t((()=>[i(y,{modelValue:c.model.is_member_api,"onUpdate:modelValue":_[2]||(_[2]=e=>c.model.is_member_api=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),i(j,{span:20},{default:t((()=>[s(" 关闭后，不校验接口和权限，所有接口（免登除外）均需登录访问 ")])),_:1})])),_:1}),i(V,null,{default:t((()=>[i(v,{loading:c.loading,onClick:_[3]||(_[3]=e=>g.refresh())},{default:t((()=>[s("刷新")])),_:1},8,["loading"]),i(v,{loading:c.loading,type:"primary",onClick:_[4]||(_[4]=e=>g.submit())},{default:t((()=>[s("提交")])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})}]]);export{g as default};

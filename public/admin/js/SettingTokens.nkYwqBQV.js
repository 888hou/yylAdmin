import{ab as e,a,k as l,w as t,a3 as o,a2 as s,ay as i,as as n}from"./index.Dxpxc0Wv.js";import{E as d}from"./el-row.zIhwjUGa.js";import{a as m,E as r}from"./el-form-item.BmMa_aL_.js";import{E as u}from"./el-switch.Ebb2GB46.js";import{E as p}from"./el-col.BYj1fpTj.js";import{s as _}from"./screen-height.BK3DmwY2.js";import{t as f,n as h}from"./setting.BBWsOt3Z.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./castArray.BzMl53vD.js";import"./_Uint8Array.T21uhEY5.js";import"./tagsView.CyhALVSk.js";const k=g({name:"SystemSettingToken",data:()=>({name:"Token设置",height:680,loading:!1,model:{token_key:"",token_exp:12,is_multi_login:0},rules:{token_key:[{required:!0,message:"请输入Token密钥",trigger:"blur"}]}}),created(){this.height=_(210),this.info()},methods:{info(){f().then((e=>{this.model=e.data}))},refresh(){this.loading=!0,f().then((a=>{this.model=a.data,this.loading=!1,e.success(a.msg)})).catch((()=>{this.loading=!1}))},submit(){this.$refs.ref.validate((a=>{a&&(this.loading=!0,h(this.model).then((a=>{this.loading=!1,e.success(a.msg)})).catch((()=>{this.loading=!1})))}))}}},[["render",function(e,_,f,h,g,k){const c=i,y=p,b=m,j=u,V=n,x=r,v=d;return a(),l(v,null,{default:t((()=>[o(y,{span:16},{default:t((()=>[o(x,{ref:"ref",model:g.model,rules:g.rules,"label-width":"120px"},{default:t((()=>[o(b,{label:"Token密钥",prop:"token_key"},{default:t((()=>[o(y,{span:8},{default:t((()=>[o(c,{modelValue:g.model.token_key,"onUpdate:modelValue":_[0]||(_[0]=e=>g.model.token_key=e),type:"text",clearable:""},null,8,["modelValue"])])),_:1}),o(y,{span:16},{default:t((()=>[s(" 修改后用户登录状态失效，需重新登录。 ")])),_:1})])),_:1}),o(b,{label:"Token有效时间",prop:"token_exp"},{default:t((()=>[o(y,{span:8},{default:t((()=>[o(c,{modelValue:g.model.token_exp,"onUpdate:modelValue":_[1]||(_[1]=e=>g.model.token_exp=e),type:"number"},{append:t((()=>[s("小时")])),_:1},8,["modelValue"])])),_:1}),o(y,{span:16},{default:t((()=>[s(" 登录成功后超过有效时间，需重新登录。 ")])),_:1})])),_:1}),o(b,{label:"多端登录",prop:"is_multi_login"},{default:t((()=>[o(y,{span:8},{default:t((()=>[o(j,{modelValue:g.model.is_multi_login,"onUpdate:modelValue":_[2]||(_[2]=e=>g.model.is_multi_login=e),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),o(y,{span:16},{default:t((()=>[s(" 开启后可以在多个设备同时登录。 ")])),_:1})])),_:1}),o(b,null,{default:t((()=>[o(V,{loading:g.loading,onClick:_[3]||(_[3]=e=>k.refresh())},{default:t((()=>[s("刷新")])),_:1},8,["loading"]),o(V,{loading:g.loading,type:"primary",onClick:_[4]||(_[4]=e=>k.submit())},{default:t((()=>[s("提交")])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})}]]);export{k as default};

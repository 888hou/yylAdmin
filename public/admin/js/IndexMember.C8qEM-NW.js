import{O as t,c as e,l as a,w as n,a3 as s,k as o,t as i,an as r}from"./index.APvhMgDH.js";import{v as d}from"./el-loading.IVadhBA1.js";import{E as l}from"./el-card.AzeQmgCv.js";import{E as p}from"./el-row.CPP9k-Sk.js";import{E as m}from"./el-col.CfjMTi8p.js";import{E as h}from"./el-date-picker.D6McR6zP.js";import"./el-scrollbar.BRsHK0Jh.js";import"./el-popper.BGF08XMW.js";import{a as c,E as g}from"./el-select.DcB9YoAC.js";import{m as _}from"./index.By1cuYmx.js";import{_ as u}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{i as y,a as f}from"./install.Be7BgDCX.js";import{u as x,i as w,a as j,b as k,c as D}from"./installCanvasRenderer.BU9Xfj2q.js";import{i as C,a as b}from"./install.6My4tGJu.js";import{i as M}from"./install.8F3SWQ07.js";import"./debounce.DkHeVxem.js";import"./index.DWtrYHhd.js";import"./isUndefined.DgmxjSXK.js";import"./_Uint8Array.Dyjbn1zu.js";import"./castArray.BGOR1owe.js";x([y,C,w,M,b,j,f,k]);const v=u({name:"SystemIndexMember",data:()=>({name:"会员统计",height:500,loading:!1,date_type:"day",date_range:[],date_ptype:"monthrange",date_format:"YYYY-MM",date_options:{},date_options_day:{shortcuts:[{text:"最近7天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-5184e5),t.$emit("pick",[a,e])}},{text:"最近30天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-25056e5),t.$emit("pick",[a,e])}},{text:"最近90天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-76896e5),t.$emit("pick",[a,e])}},{text:"最近120天",onClick(t){const e=new Date,a=new Date;a.setTime(a.getTime()-102816e5),t.$emit("pick",[a,e])}}]},date_options_month:{shortcuts:[{text:"最近3个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-2),t.$emit("pick",[a,e])}},{text:"最近6个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-5),t.$emit("pick",[a,e])}},{text:"最近9个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-8),t.$emit("pick",[a,e])}},{text:"最近12个月",onClick(t){const e=new Date,a=new Date;a.setMonth(a.getMonth()-11),t.$emit("pick",[a,e])}}]}}),created(){this.stat()},methods:{stat(){this.loading=!0,_({type:this.date_type,date:this.date_range}).then((t=>{this.date_type=t.data.number.type,this.date_range=t.data.number.date,this.dateEchart(t.data.number,"numberEchart"),this.dateOptions(),this.loading=!1})).catch((()=>{this.loading=!1}))},typeChange(){this.dateOptions(),this.date_range=[]},dateOptions(){const t=this.date_type;"day"===t?(this.date_ptype="daterange",this.date_format="YYYY-MM-DD",this.date_options=this.date_options_day):"month"===t&&(this.date_ptype="monthrange",this.date_format="YYYY-MM",this.date_options=this.date_options_month)},dateChange(){this.stat()},dateEchart(t,e){var a=D(document.getElementById(e)),n={title:{left:"center"},legend:{top:"20px",data:t.legend,selected:{"总数":!1}},grid:{top:"80px",left:"1%",right:"3%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:t.xAxis},yAxis:{type:"value"},tooltip:{trigger:"axis",textStyle:{align:"left"}},toolbox:{feature:{magicType:{show:!0,type:["line","bar"]},dataView:{show:!0,readOnly:!0},saveAsImage:{show:!0,name:this.name+t.date[0]+"-"+t.date[1]}}},series:t.series};a.setOption(n)}}},[["render",function(_,u,y,f,x,w){const j=c,k=g,D=h,C=m,b=p,M=l,v=d;return t((e(),a(M,null,{default:n((()=>[s(b,null,{default:n((()=>[o("span",null,i(x.name),1),s(C,{class:"text-center"},{default:n((()=>[s(k,{modelValue:x.date_type,"onUpdate:modelValue":u[0]||(u[0]=t=>x.date_type=t),class:"!w-[100px]",onChange:w.typeChange},{default:n((()=>[s(j,{label:"日",value:"day"}),s(j,{label:"月",value:"month"})])),_:1},8,["modelValue","onChange"]),s(D,{modelValue:x.date_range,"onUpdate:modelValue":u[1]||(u[1]=t=>x.date_range=t),type:x.date_ptype,"value-format":x.date_format,"picker-options":x.date_options,"start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:w.dateChange},null,8,["modelValue","type","value-format","picker-options","onChange"])])),_:1}),s(C,null,{default:n((()=>[o("div",{id:"numberEchart",style:r({height:x.height+"px"})},null,4)])),_:1})])),_:1})])),_:1})),[[v,x.loading]])}]]);export{v as default};

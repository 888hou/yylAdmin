import{cP as e,cQ as l,r as t,D as a,K as i,c as s,l as o,w as u,a3 as r,g as d,ao as p,e as n,k as f,ab as c,a2 as y,t as m,bY as v,at as h}from"./index.CYwDHgSX.js";import{E as g}from"./el-dialog.B1SEhGSD.js";import{E as _}from"./el-row.CUAePAXu.js";import{E as w}from"./el-text.zGvo9xJ-.js";import{E as k}from"./el-col.DryuoNBx.js";import{E as z}from"./el-avatar.D5vNYMrj.js";import{E as T}from"./el-image-viewer.DO1yrrM3.js";import{_ as b}from"./index.0Pcvv1HQ.js";import{F as j}from"./index.qyMIJHDy.js";const x={key:0},B=["src"],S=["data"],E=["src"],V=["src"],U=["src"],C={key:3},F={key:4},K={key:1},M={__name:"FileImage",props:e({fileType:{type:String,default:"image"},fileTitle:{type:String,default:"上传图片"},fileTip:{type:String,default:"图片小于200KB，jpg、png格式。"},height:{type:Number,default:30},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},previewTeleported:{type:Boolean,default:!0},uploadBtn:{type:String,default:"上传"},deleteBtn:{type:String,default:"删除"},avatar:{type:Boolean,default:!1},upload:{type:Boolean,default:!1}},{modelValue:{type:Number,default:0},modelModifiers:{},fileUrl:{type:String,default:""},fileUrlModifiers:{}}),emits:["update:modelValue","update:fileUrl"],setup(e){const M=l(e,"modelValue"),N=l(e,"fileUrl"),A=e,D=t(24),I=t(0),P=t(!1),Q=a((()=>({height:A.height+"px"}))),R=a((()=>({height:A.height+"px"}))),Y=a((()=>({height:A.height+"px"}))),q=a((()=>({width:"90%"}))),G=a((()=>.7*A.height+"px"));function H(){P.value=!1}function J(e){P.value=!1;const l=e.length;if(l){const t=l-1;M.value=e[t].file_id,N.value=e[t].file_url}}return i([()=>A.avatar,()=>A.upload],(([e,l])=>{e&&(R.value.width=A.height+"px",R.value.borderRadius="50%"),l&&(D.value=12,I.value=12)}),{immediate:!0}),(l,t)=>{const a=b,i=T,A=z,L=k,O=h,W=w,X=_,Z=g;return s(),o(X,{style:{width:"100%"}},{default:u((()=>[r(L,{span:d(D),style:p(d(Q))},{default:u((()=>[N.value?(s(),n("div",x,["image"===e.fileType?(s(),o(i,{key:0,style:p(d(R)),src:N.value,fit:e.fit,"preview-src-list":[N.value],"preview-teleported":e.previewTeleported,lazy:e.lazy,title:"点击看大图"},{error:u((()=>[r(a,{"icon-class":"picture"})])),_:1},8,["style","src","fit","preview-src-list","preview-teleported","lazy"])):"video"===e.fileType?(s(),n("video",{key:1,style:p(d(Y)),controls:""},[f("source",{src:N.value,type:"video/mp4"},null,8,B),f("object",{data:N.value,style:p(d(Y))},[f("embed",{src:N.value,style:p(d(Y))},null,12,E)],12,S)],4)):"audio"===e.fileType?(s(),n("audio",{key:2,style:p(d(q)),controls:""},[f("source",{src:N.value,type:"audio/mp3"},null,8,V),f("embed",{src:N.value,style:p(d(q))},null,12,U)],4)):"word"===e.fileType?(s(),n("div",C,[r(a,{"icon-class":"document",size:d(G)},null,8,["size"])])):"other"===e.fileType?(s(),n("div",F,[r(a,{"icon-class":"folder",size:d(G)},null,8,["size"])])):c("",!0)])):(s(),n("div",K,[e.avatar?(s(),o(A,{key:0,size:e.height},{default:u((()=>[r(a,{"icon-class":"user-filled",size:d(G)},null,8,["size"])])),_:1},8,["size"])):c("",!0)]))])),_:1},8,["span","style"]),r(L,{span:d(I)},{default:u((()=>[r(X,null,{default:u((()=>[r(L,null,{default:u((()=>[r(O,{onClick:t[0]||(t[0]=e=>{P.value=!0})},{default:u((()=>[y(m(e.uploadBtn),1)])),_:1}),r(O,{onClick:t[1]||(t[1]=e=>(M.value=0,void(N.value="")))},{default:u((()=>[y(m(e.deleteBtn),1)])),_:1}),N.value?(s(),o(O,{key:0,onClick:t[2]||(t[2]=e=>{window.open(N.value,"_blank")})},{default:u((()=>[y("下载")])),_:1})):c("",!0)])),_:1}),r(L,null,{default:u((()=>[r(W,{size:"default",truncated:"",title:e.fileTip},{default:u((()=>[y(m(e.fileTip),1)])),_:1},8,["title"])])),_:1})])),_:1})])),_:1},8,["span"]),r(Z,{modelValue:d(P),"onUpdate:modelValue":t[3]||(t[3]=e=>v(P)?P.value=e:null),title:e.fileTitle,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"1vh",width:"80%","append-to-body":""},{default:u((()=>[r(j,{"file-type":e.fileType,onFileCancel:H,onFileSubmit:J},null,8,["file-type"])])),_:1},8,["modelValue","title"])])),_:1})}}};export{M as _};

import{r as e,J as l,C as t,a as i,k as a,w as s,a2 as o,a1 as r,t as n,c as u,P as f,ae as d,f as p,am as c,j as m,bU as y,ar as _}from"./index.DjA_re4j.js";import{E as h}from"./el-dialog.yRJSSox7.js";import{E as v}from"./el-row.BdhO5HhT.js";import{E as g}from"./el-link.BPpHkZqa.js";import{E as k}from"./el-image-viewer.fFYArL2i.js";import{_ as w}from"./index.DhRVrygn.js";import{E as x}from"./el-col.Dga7oIhs.js";import{E as j}from"./el-text.w_ZtZ4uh.js";import{F as C}from"./index.De39iDjm.js";import{h as b}from"./clipboard.2ITcRTuu.js";const z=["src"],T=["data"],B=["src"],S=["src"],V=["src"],E={key:3},F={key:4},U={__name:"FileUploads",props:{modelValue:{type:[Array,Object],default:()=>[]},fileType:{type:String,default:"all"},fileTitle:{type:String,default:""},fileTip:{type:String,default:""},height:{type:Number,default:100},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},uploadBtn:{type:String,default:"上传文件"},deleteBtn:{type:String,default:"全部删除"}},emits:["update:modelValue"],setup(U,{emit:A}){const D=U,G=e([]),J=e(!1),N=A;l((()=>D.modelValue),(e=>{G.value=e}),{immediate:!0});const O=t((()=>({height:D.height+"px"}))),P=t((()=>({width:"90%"}))),q=t((()=>.7*D.height+"px"));function H(e){return e.file_name+"."+e.file_ext}function I(){J.value=!1}function K(e){J.value=!1;const l=e.length;if(l){for(let t=0;t<l;t++)G.value.push(e[t]);N("update:modelValue",G)}}function L(e,l="right"){const t=G.value.length;var i=e;if("left"===l){if(e<=0)return!1;--i}else{if(e>=t-1)return!1;++i}const a=G.value[e],s=G.value[i];G.value[e]=s,G.value[i]=a}function M(e){"all"===e?G.value=[]:G.value.splice(e,1)}return(e,l)=>{const t=j,A=x,D=_,N=w,Q=k,R=g,W=v,X=h;return i(),a(W,{style:{width:"100%"}},{default:s((()=>[o(A,{span:12},{default:s((()=>[o(t,{size:"default",truncated:"",title:U.fileTip},{default:s((()=>[r(n(U.fileTip),1)])),_:1},8,["title"])])),_:1}),o(A,{span:12},{default:s((()=>[o(D,{onClick:l[0]||(l[0]=e=>{J.value=!0})},{default:s((()=>[r(n(U.uploadBtn),1)])),_:1}),o(D,{onClick:l[1]||(l[1]=e=>M("all"))},{default:s((()=>[r(n(U.deleteBtn),1)])),_:1})])),_:1}),(i(!0),u(f,null,d(p(G),((e,l)=>(i(),a(A,{key:l,span:6},{default:s((()=>[o(W,{class:"file-row"},{default:s((()=>[o(A,{style:c({height:U.height+"px"})},{default:s((()=>["image"===e.file_type?(i(),a(Q,{key:0,style:c({height:U.height+"px"}),src:e.file_url,fit:U.fit,"preview-src-list":[e.file_url],lazy:U.lazy,title:"点击看大图"},{error:s((()=>[o(N,{"icon-class":"picture"})])),_:2},1032,["style","src","fit","preview-src-list","lazy"])):"video"===e.file_type?(i(),u("video",{key:1,style:c(p(O)),controls:""},[m("source",{src:e.file_url,type:"video/mp4"},null,8,z),m("object",{data:e.file_url,style:c(p(O))},[m("embed",{src:e.file_url,style:c(p(O))},null,12,B)],12,T)],4)):"audio"===e.file_type?(i(),u("audio",{key:2,style:c(p(P)),controls:""},[m("source",{src:e.file_url,type:"audio/mp3"},null,8,S),m("embed",{src:e.file_url,style:c(p(P))},null,12,V)],4)):"word"===e.file_type?(i(),u("div",E,[o(N,{"icon-class":"document",size:p(q)},null,8,["size"])])):(i(),u("div",F,[o(N,{"icon-class":"folder",size:p(q)},null,8,["size"])]))])),_:2},1032,["style"]),o(A,{style:{"max-height":"40px"}},{default:s((()=>[o(t,{size:"default",truncated:"",title:H(e)},{default:s((()=>[r(n(H(e)),1)])),_:2},1032,["title"])])),_:2},1024),o(A,{style:{"max-height":"40px"}},{default:s((()=>[o(R,{class:"file-link",type:"primary",underline:!1,title:"向左移动",onClick:e=>L(l,"left")},{default:s((()=>[o(N,{"icon-class":"d-arrow-left"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"向左移动",onClick:e=>L(l,"right")},{default:s((()=>[o(N,{"icon-class":"d-arrow-right"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"下载",onClick:l=>{return b(H(t=e),"文件名复制成功"),void setTimeout((()=>{window.open(t.file_url,"_blank")}),500);var t}},{default:s((()=>[o(N,{"icon-class":"download"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"删除",onClick:e=>M(l)},{default:s((()=>[o(N,{"icon-class":"delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),o(X,{modelValue:p(J),"onUpdate:modelValue":l[2]||(l[2]=e=>y(J)?J.value=e:null),title:U.fileTitle?U.fileTitle:U.uploadBtn,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"1vh",width:"80%","append-to-body":""},{default:s((()=>[o(C,{"file-type":U.fileType,onFileCancel:I,onFileSubmit:K},null,8,["file-type"])])),_:1},8,["modelValue","title"])])),_:1})}}};export{U as _};

import{r as e,K as l,C as t,a as i,k as a,w as s,a3 as o,a2 as r,t as n,c as u,Q as f,af as d,f as p,an as c,j as m,bV as y,as as _}from"./index.B1EzHEmU.js";import{E as h}from"./el-dialog.CQ7599ig.js";import{E as v}from"./el-row.4zcYSQ9X.js";import{E as g}from"./el-link.Brf_5EHC.js";import{E as k}from"./el-image-viewer.B33YjaQL.js";import{_ as w}from"./index.C6FF1HBs.js";import{E as x}from"./el-col.Mdu7axof.js";import{E as j}from"./el-text.BSBJ2EsU.js";import{F as C}from"./index.S7KU-L6s.js";import{h as z}from"./clipboard.D1Huvdlq.js";const b=["src"],T=["data"],V=["src"],E=["src"],S=["src"],B={key:3},F={key:4},A={__name:"FileUploads",props:{modelValue:{type:[Array,Object],default:()=>[]},fileType:{type:String,default:"all"},fileTitle:{type:String,default:""},fileTip:{type:String,default:""},height:{type:Number,default:100},fit:{type:String,default:""},lazy:{type:Boolean,default:!1},uploadBtn:{type:String,default:"上传文件"},deleteBtn:{type:String,default:"全部删除"}},emits:["update:modelValue"],setup(A,{emit:U}){const K=A,N=e([]),O=e(!1),Q=U;l((()=>K.modelValue),(e=>{N.value=e}),{immediate:!0});const q=t((()=>({height:K.height+"px"}))),D=t((()=>({width:"90%"}))),G=t((()=>.7*K.height+"px"));function H(e){return e.file_name+"."+e.file_ext}function I(){O.value=!1}function J(e){O.value=!1;const l=e.length;if(l){for(let t=0;t<l;t++)N.value.push(e[t]);Q("update:modelValue",N)}}function L(e,l="right"){const t=N.value.length;var i=e;if("left"===l){if(e<=0)return!1;--i}else{if(e>=t-1)return!1;++i}const a=N.value[e],s=N.value[i];N.value[e]=s,N.value[i]=a}function M(e){"all"===e?N.value=[]:N.value.splice(e,1)}return(e,l)=>{const t=j,U=x,K=_,Q=w,P=k,R=g,W=v,X=h;return i(),a(W,{style:{width:"100%"}},{default:s((()=>[o(U,{span:12},{default:s((()=>[o(t,{size:"default",truncated:"",title:A.fileTip},{default:s((()=>[r(n(A.fileTip),1)])),_:1},8,["title"])])),_:1}),o(U,{span:12},{default:s((()=>[o(K,{onClick:l[0]||(l[0]=e=>{O.value=!0})},{default:s((()=>[r(n(A.uploadBtn),1)])),_:1}),o(K,{onClick:l[1]||(l[1]=e=>M("all"))},{default:s((()=>[r(n(A.deleteBtn),1)])),_:1})])),_:1}),(i(!0),u(f,null,d(p(N),((e,l)=>(i(),a(U,{key:l,span:6},{default:s((()=>[o(W,{class:"file-row"},{default:s((()=>[o(U,{style:c({height:A.height+"px"})},{default:s((()=>["image"===e.file_type?(i(),a(P,{key:0,style:c({height:A.height+"px"}),src:e.file_url,fit:A.fit,"preview-src-list":[e.file_url],lazy:A.lazy,title:"点击看大图"},{error:s((()=>[o(Q,{"icon-class":"picture"})])),_:2},1032,["style","src","fit","preview-src-list","lazy"])):"video"===e.file_type?(i(),u("video",{key:1,style:c(p(q)),controls:""},[m("source",{src:e.file_url,type:"video/mp4"},null,8,b),m("object",{data:e.file_url,style:c(p(q))},[m("embed",{src:e.file_url,style:c(p(q))},null,12,V)],12,T)],4)):"audio"===e.file_type?(i(),u("audio",{key:2,style:c(p(D)),controls:""},[m("source",{src:e.file_url,type:"audio/mp3"},null,8,E),m("embed",{src:e.file_url,style:c(p(D))},null,12,S)],4)):"word"===e.file_type?(i(),u("div",B,[o(Q,{"icon-class":"document",size:p(G)},null,8,["size"])])):(i(),u("div",F,[o(Q,{"icon-class":"folder",size:p(G)},null,8,["size"])]))])),_:2},1032,["style"]),o(U,{style:{"max-height":"40px"}},{default:s((()=>[o(t,{size:"default",truncated:"",title:H(e)},{default:s((()=>[r(n(H(e)),1)])),_:2},1032,["title"])])),_:2},1024),o(U,{style:{"max-height":"40px"}},{default:s((()=>[o(R,{class:"file-link",type:"primary",underline:!1,title:"向左移动",onClick:e=>L(l,"left")},{default:s((()=>[o(Q,{"icon-class":"d-arrow-left"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"向左移动",onClick:e=>L(l,"right")},{default:s((()=>[o(Q,{"icon-class":"d-arrow-right"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"下载",onClick:l=>{return z(H(t=e),"文件名复制成功"),void setTimeout((()=>{window.open(t.file_url,"_blank")}),500);var t}},{default:s((()=>[o(Q,{"icon-class":"download"})])),_:2},1032,["onClick"]),o(R,{class:"file-link",type:"primary",underline:!1,title:"删除",onClick:e=>M(l)},{default:s((()=>[o(Q,{"icon-class":"delete"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),o(X,{modelValue:p(O),"onUpdate:modelValue":l[2]||(l[2]=e=>y(O)?O.value=e:null),title:A.fileTitle?A.fileTitle:A.uploadBtn,"close-on-click-modal":!1,"close-on-press-escape":!1,top:"1vh",width:"80%","append-to-body":""},{default:s((()=>[o(C,{"file-type":A.fileType,onFileCancel:I,onFileSubmit:J},null,8,["file-type"])])),_:1},8,["modelValue","title"])])),_:1})}}};export{A as _};
